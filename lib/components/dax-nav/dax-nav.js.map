{"version":3,"file":"dax-nav.js","sources":["../../../src/components/base/base-component.js","../../../src/components/dax-nav/dax-nav.js"],"sourcesContent":["/**\n * Module-level state store using WeakMaps for automatic garbage collection.\n * Private to this module - components access state via class methods.\n */\nconst stateMap = new WeakMap();\nconst refsMap = new WeakMap();\n\n/**\n * BaseComponent mixin - provides common functionality for web components.\n *\n * Public API (for subclasses):\n *   State:      initComponent, getComponentState, setComponentState,\n *                getComponentRefs, setComponentRefs\n *   Styles:     initStyles (reads static styles/stylesId)\n *   DOM:        initShadow, initLightDOM, queryRefs, queryLightRefs\n *   Attributes: getNumberAttr, getBooleanAttr, getStringAttr\n *   Events:     addManagedListener\n *   Timers:     setManagedInterval, clearManagedInterval, setManagedTimeout, clearManagedTimeout\n *   Cleanup:    cleanup (call in disconnectedCallback)\n */\nconst BaseComponent = (Base = HTMLElement) => class extends Base {\n    // Private fields\n    #listeners = [];\n\n    #timers = { intervals: [], timeouts: [] };\n\n    // ─────────────────────────────────────────────────────────────\n    // State Management (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    initComponent(state = {}, refs = {}) {\n        stateMap.set(this, state);\n        refsMap.set(this, refs);\n    }\n\n    getComponentState() {\n        return stateMap.get(this);\n    }\n\n    setComponentState(updates = {}) {\n        const state = stateMap.get(this);\n        if (!state) return;\n        Object.assign(state, updates);\n    }\n\n    getComponentRefs() {\n        return refsMap.get(this);\n    }\n\n    setComponentRefs(refs = {}) {\n        refsMap.set(this, refs);\n    }\n\n    #destroyComponent() {\n        stateMap.delete(this);\n        refsMap.delete(this);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Styles (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    /**\n     * Inject component styles into document head.\n     * Reads styles from static `styles` and `stylesId` properties.\n     * Only injects once per unique ID.\n     */\n    initStyles() {\n        const { styles, stylesId } = this.constructor;\n        if (!styles || !stylesId) return;\n        if (document.getElementById(stylesId)) return;\n        const styleEl = document.createElement('style');\n        styleEl.id = stylesId;\n        styleEl.textContent = styles;\n        document.head.appendChild(styleEl);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // DOM Initialization (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    initShadow(template, mode = 'open') {\n        const shadow = this.attachShadow({ mode });\n        shadow.appendChild(template.content.cloneNode(true));\n        return shadow;\n    }\n\n    initLightDOM(template) {\n        this.appendChild(template.content.cloneNode(true));\n    }\n\n    queryRefs(selectors = {}) {\n        const shadow = this.shadowRoot;\n        if (!shadow) return {};\n\n        const refs = {};\n        Object.entries(selectors).forEach(([key, selector]) => {\n            refs[key] = shadow.querySelector(selector);\n        });\n        return refs;\n    }\n\n    queryLightRefs(selectors = {}) {\n        const refs = {};\n        Object.entries(selectors).forEach(([key, selector]) => {\n            refs[key] = this.querySelector(selector);\n        });\n        return refs;\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Attribute Helpers (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    getNumberAttr(name, defaultValue = 0) {\n        const value = this.getAttribute(name);\n        return value !== null ? Number(value) : defaultValue;\n    }\n\n    getBooleanAttr(name) {\n        return this.hasAttribute(name);\n    }\n\n    getStringAttr(name, defaultValue = '') {\n        return this.getAttribute(name) ?? defaultValue;\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Event Listener Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    addManagedListener(target, event, handler, options) {\n        target.addEventListener(event, handler, options);\n        this.#listeners.push({\n            target,\n            event,\n            handler,\n            options,\n        });\n    }\n\n    #removeAllListeners() {\n        this.#listeners.forEach(({\n            target,\n            event,\n            handler,\n            options,\n        }) => {\n            target.removeEventListener(event, handler, options);\n        });\n        this.#listeners = [];\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Timer Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    setManagedInterval(callback, delay) {\n        const id = setInterval(callback, delay);\n        this.#timers.intervals.push(id);\n        return id;\n    }\n\n    clearManagedInterval(id) {\n        clearInterval(id);\n        this.#timers.intervals = this.#timers.intervals.filter((i) => i !== id);\n    }\n\n    setManagedTimeout(callback, delay) {\n        const id = setTimeout(callback, delay);\n        this.#timers.timeouts.push(id);\n        return id;\n    }\n\n    clearManagedTimeout(id) {\n        clearTimeout(id);\n        this.#timers.timeouts = this.#timers.timeouts.filter((i) => i !== id);\n    }\n\n    #clearAllTimers() {\n        this.#timers.intervals.forEach((id) => clearInterval(id));\n        this.#timers.timeouts.forEach((id) => clearTimeout(id));\n        this.#timers = { intervals: [], timeouts: [] };\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Cleanup (Public API - call in disconnectedCallback)\n    // ─────────────────────────────────────────────────────────────\n\n    cleanup() {\n        this.#removeAllListeners();\n        this.#clearAllTimers();\n        this.#destroyComponent();\n    }\n};\n\nexport default BaseComponent;\n","import BaseComponent from '../base/base-component';\nimport styles from './dax-nav.scss';\n\n// Auto-close delay in milliseconds - single canonical source for this value\nconst AUTO_CLOSE_DELAY_MS = 1600;\n\n// Hover zone width as fraction of viewport (1/5 = 20%)\nconst HOVER_ZONE_FRACTION = 0.2;\n\n// Feature detection: check if browser supports CSS :has() selector\n// If not, we'll fall back to JS class toggling on <aside>\nconst HAS_CSS_HAS_SUPPORT = CSS.supports('selector(:has(*))');\n\nconst MENU_TEMPLATE = `\n    <button class=\"dax-nav-toggle\" type=\"button\" aria-label=\"Open menu\" aria-expanded=\"false\" aria-controls=\"dax-nav-menu\">\n        <span class=\"material-symbols-sharp\" aria-hidden=\"true\">menu</span>\n    </button>\n`;\n\nconst REF_SELECTORS = {\n    toggle: '.dax-nav-toggle',\n    menu: '.dax-nav-menu',\n    projectList: '.dax-nav-projects',\n};\n\nclass DaxNav extends BaseComponent(HTMLElement) {\n    static styles = styles;\n\n    static stylesId = 'dax-nav-styles';\n\n    #refs = {};\n\n    #isOpen = false;\n\n    #autoCloseTimer = null;\n\n    // Prevents re-opening immediately after auto-close while mouse is still in hover zone\n    #wasAutoClosed = false;\n\n    connectedCallback() {\n        this.initStyles();\n        this.#initDOM();\n        this.#markCurrentPage();\n        this.#attachEventListeners();\n\n        // Open menu initially and start auto-close timer\n        this.#openMenu();\n        this.#startAutoCloseTimer();\n    }\n\n    disconnectedCallback() {\n        this.cleanup();\n    }\n\n    #initDOM() {\n        // Find and enhance existing menu list\n        const existingMenu = this.querySelector(':scope > ul');\n        if (existingMenu) {\n            existingMenu.classList.add('dax-nav-menu');\n            existingMenu.id = 'dax-nav-menu';\n            existingMenu.setAttribute('role', 'menubar');\n        }\n\n        // Find and enhance project list\n        const projectList = this.querySelector('.dax-nav-projects, .project-list');\n        if (projectList) {\n            projectList.classList.add('dax-nav-projects');\n            projectList.setAttribute('role', 'menu');\n        }\n\n        // Add menu items role\n        this.querySelectorAll(':scope > ul > li').forEach((li) => {\n            li.setAttribute('role', 'none');\n            const link = li.querySelector(':scope > a');\n            if (link) {\n                link.setAttribute('role', 'menuitem');\n            }\n        });\n\n        // Add project items role\n        this.querySelectorAll('.dax-nav-projects > li').forEach((li) => {\n            li.setAttribute('role', 'none');\n            const link = li.querySelector('a');\n            if (link) {\n                link.setAttribute('role', 'menuitem');\n            }\n        });\n\n        // Insert mobile toggle button\n        const template = document.createElement('template');\n        template.innerHTML = MENU_TEMPLATE;\n        this.insertBefore(template.content.cloneNode(true), this.firstChild);\n\n        this.#refs = {\n            toggle: this.querySelector(REF_SELECTORS.toggle),\n            menu: this.querySelector(REF_SELECTORS.menu),\n            projectList: this.querySelector(REF_SELECTORS.projectList),\n        };\n\n        // Set initial closed state via attribute\n        this.setAttribute('data-open', 'false');\n    }\n\n    #markCurrentPage() {\n        const currentPath = window.location.pathname;\n\n        // Remove any existing current markers\n        this.querySelectorAll('.dax-nav-current').forEach((el) => {\n            el.classList.remove('dax-nav-current');\n            const link = el.querySelector('a');\n            if (link) {\n                link.removeAttribute('aria-current');\n            }\n        });\n\n        // Find matching link and mark as current\n        const links = this.querySelectorAll('a[href]');\n        let matchedLink = null;\n        let longestMatch = 0;\n\n        links.forEach((link) => {\n            const href = link.getAttribute('href');\n            if (!href) return;\n\n            // Resolve relative URLs\n            const absoluteUrl = new URL(href, window.location.href);\n            const linkPath = absoluteUrl.pathname;\n\n            // Check if current path matches or starts with link path\n            // Use longest match to handle nested routes\n            if (currentPath === linkPath || currentPath.startsWith(linkPath.replace(/\\/?$/, '/'))) {\n                const matchLength = linkPath.length;\n                if (matchLength > longestMatch) {\n                    longestMatch = matchLength;\n                    matchedLink = link;\n                }\n            }\n        });\n\n        if (matchedLink) {\n            const parentLi = matchedLink.closest('li');\n            if (parentLi) {\n                parentLi.classList.add('dax-nav-current');\n            }\n            matchedLink.setAttribute('aria-current', 'page');\n        }\n    }\n\n    #attachEventListeners() {\n        const { toggle, menu } = this.#refs;\n\n        // Toggle button click\n        if (toggle) {\n            this.addManagedListener(toggle, 'click', () => this.#toggleMenu());\n        }\n\n        // Close menu on escape\n        this.addManagedListener(document, 'keydown', (event) => {\n            if (event.key === 'Escape' && this.#isOpen) {\n                this.#closeMenu();\n                toggle?.focus();\n            }\n        });\n\n        // Start auto-close timer on click outside (let timer control close, not immediate)\n        this.addManagedListener(document, 'click', (event) => {\n            if (this.#isOpen && !this.contains(event.target)) {\n                this.#startAutoCloseTimer();\n            }\n        });\n\n        // Keyboard navigation within menu\n        if (menu) {\n            this.addManagedListener(menu, 'keydown', (event) => {\n                this.#handleMenuKeyboard(event);\n            });\n\n            // Cancel auto-close timer on any interaction within menu\n            this.addManagedListener(menu, 'mousemove', () => this.#clearAutoCloseTimer());\n            this.addManagedListener(menu, 'focusin', () => this.#clearAutoCloseTimer());\n        }\n\n        // Dispatch overlay event when menu state changes\n        this.addManagedListener(this, 'dax-nav-toggle', (event) => {\n            document.dispatchEvent(new CustomEvent('ui-overlay-toggle', {\n                detail: {\n                    source: 'menu',\n                    isOpen: event.detail.isOpen,\n                },\n            }));\n        });\n\n        // Auto-open when mouse enters left edge zone (1/5 of viewport width)\n        this.addManagedListener(document, 'mousemove', (event) => {\n            const hoverZoneWidth = window.innerWidth * HOVER_ZONE_FRACTION;\n            const inHoverZone = event.clientX <= hoverZoneWidth;\n\n            if (inHoverZone && !this.#isOpen && !this.#wasAutoClosed) {\n                this.#openMenu();\n            }\n\n            // Reset the auto-close flag when mouse leaves the hover zone\n            if (!inHoverZone && this.#wasAutoClosed) {\n                this.#wasAutoClosed = false;\n            }\n        });\n\n        // Keep menu open while mouse is over the nav or its parent sidebar\n        // Use closest aside as hover target if it exists, otherwise use self\n        const hoverTarget = this.closest('aside') || this;\n\n        // Cancel any auto-close timer when mouse enters nav area\n        this.addManagedListener(hoverTarget, 'mouseenter', () => {\n            this.#clearAutoCloseTimer();\n        });\n\n        // Start auto-close timer only when mouse leaves nav area\n        this.addManagedListener(hoverTarget, 'mouseleave', () => {\n            if (this.#isOpen) {\n                this.#startAutoCloseTimer();\n            }\n        });\n    }\n\n    #toggleMenu() {\n        if (this.#isOpen) {\n            this.#closeMenu();\n        } else {\n            this.#openMenu();\n        }\n    }\n\n    #openMenu() {\n        const { toggle, menu } = this.#refs;\n        this.#isOpen = true;\n\n        // Set open state via attribute (CSS :has() will handle parent styling)\n        this.setAttribute('data-open', 'true');\n\n        // Fallback for browsers without :has() support\n        if (!HAS_CSS_HAS_SUPPORT) {\n            this.closest('aside')?.classList.add('is-open');\n        }\n\n        if (toggle) {\n            toggle.setAttribute('aria-expanded', 'true');\n            toggle.setAttribute('aria-label', 'Close menu');\n            const icon = toggle.querySelector('.material-symbols-sharp');\n            if (icon) icon.textContent = 'close';\n        }\n\n        if (menu) {\n            menu.setAttribute('aria-hidden', 'false');\n            // Focus first menu item\n            const firstLink = menu.querySelector('a');\n            if (firstLink) {\n                this.setManagedTimeout(() => firstLink.focus(), 100);\n            }\n        }\n\n        this.dispatchEvent(new CustomEvent('dax-nav-toggle', {\n            detail: { isOpen: true },\n            bubbles: true,\n        }));\n\n        // Note: Auto-close timer is NOT started here.\n        // Timer only starts when cursor leaves the nav area (mouseleave).\n    }\n\n    #closeMenu() {\n        const { toggle, menu } = this.#refs;\n        this.#isOpen = false;\n\n        // Set closed state via attribute\n        this.setAttribute('data-open', 'false');\n\n        // Fallback for browsers without :has() support\n        if (!HAS_CSS_HAS_SUPPORT) {\n            this.closest('aside')?.classList.remove('is-open');\n        }\n        this.#clearAutoCloseTimer();\n\n        if (toggle) {\n            toggle.setAttribute('aria-expanded', 'false');\n            toggle.setAttribute('aria-label', 'Open menu');\n            const icon = toggle.querySelector('.material-symbols-sharp');\n            if (icon) icon.textContent = 'menu';\n        }\n\n        if (menu) {\n            menu.setAttribute('aria-hidden', 'true');\n        }\n\n        this.dispatchEvent(new CustomEvent('dax-nav-toggle', {\n            detail: { isOpen: false },\n            bubbles: true,\n        }));\n    }\n\n    #startAutoCloseTimer() {\n        this.#clearAutoCloseTimer();\n        this.#autoCloseTimer = this.setManagedTimeout(() => {\n            if (this.#isOpen) {\n                this.#wasAutoClosed = true;\n                this.#closeMenu();\n            }\n        }, AUTO_CLOSE_DELAY_MS);\n    }\n\n    #clearAutoCloseTimer() {\n        if (this.#autoCloseTimer) {\n            clearTimeout(this.#autoCloseTimer);\n            this.#autoCloseTimer = null;\n        }\n    }\n\n    #resetAutoCloseTimer() {\n        if (this.#isOpen) {\n            this.#startAutoCloseTimer();\n        }\n    }\n\n    #handleMenuKeyboard(event) {\n        const focusableItems = Array.from(this.querySelectorAll('a[href]'));\n        const currentIndex = focusableItems.indexOf(document.activeElement);\n\n        switch (event.key) {\n            case 'ArrowDown':\n            case 'ArrowRight':\n                event.preventDefault();\n                if (currentIndex < focusableItems.length - 1) {\n                    focusableItems[currentIndex + 1].focus();\n                } else {\n                    focusableItems[0].focus();\n                }\n                break;\n            case 'ArrowUp':\n            case 'ArrowLeft':\n                event.preventDefault();\n                if (currentIndex > 0) {\n                    focusableItems[currentIndex - 1].focus();\n                } else {\n                    focusableItems[focusableItems.length - 1].focus();\n                }\n                break;\n            case 'Home':\n                event.preventDefault();\n                focusableItems[0]?.focus();\n                break;\n            case 'End':\n                event.preventDefault();\n                focusableItems[focusableItems.length - 1]?.focus();\n                break;\n            default:\n                break;\n        }\n    }\n}\n\ncustomElements.define('dax-nav', DaxNav);\n\nexport default DaxNav;\n"],"names":["stateMap","WeakMap","refsMap","BaseComponent","_listeners","_timers","_Class_brand","Base","arguments","length","undefined","HTMLElement","WeakSet","_Base","_class","_this","_classCallCheck","_len","args","Array","_key","_callSuper","concat","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","intervals","timeouts","_inherits","_createClass","key","value","initComponent","state","refs","set","getComponentState","get","setComponentState","updates","Object","assign","getComponentRefs","setComponentRefs","initStyles","_this$constructor","constructor","styles","stylesId","document","getElementById","styleEl","createElement","id","textContent","head","appendChild","initShadow","template","mode","shadow","attachShadow","content","cloneNode","initLightDOM","queryRefs","selectors","shadowRoot","entries","forEach","_ref","_ref2","_slicedToArray","selector","querySelector","queryLightRefs","_this2","_ref3","_ref4","getNumberAttr","name","defaultValue","getAttribute","Number","getBooleanAttr","hasAttribute","getStringAttr","_this$getAttribute","addManagedListener","target","event","handler","options","addEventListener","_classPrivateFieldGet","push","setManagedInterval","callback","delay","setInterval","clearManagedInterval","clearInterval","filter","i","setManagedTimeout","setTimeout","clearManagedTimeout","clearTimeout","cleanup","_assertClassBrand","_removeAllListeners","call","_clearAllTimers","_destroyComponent","_ref5","removeEventListener","_classPrivateFieldSet","AUTO_CLOSE_DELAY_MS","HOVER_ZONE_FRACTION","HAS_CSS_HAS_SUPPORT","CSS","supports","MENU_TEMPLATE","REF_SELECTORS","toggle","menu","projectList","_refs","_isOpen","_autoCloseTimer","_wasAutoClosed","_DaxNav_brand","DaxNav","_BaseComponent","connectedCallback","_initDOM","_markCurrentPage","_attachEventListeners","_openMenu","_startAutoCloseTimer","disconnectedCallback","existingMenu","classList","add","setAttribute","querySelectorAll","li","link","innerHTML","insertBefore","firstChild","currentPath","window","location","pathname","el","remove","removeAttribute","links","matchedLink","longestMatch","href","absoluteUrl","URL","linkPath","startsWith","replace","matchLength","parentLi","closest","_classPrivateFieldGet2","_toggleMenu","_closeMenu","focus","contains","_handleMenuKeyboard","_clearAutoCloseTimer","dispatchEvent","CustomEvent","detail","source","isOpen","hoverZoneWidth","innerWidth","inHoverZone","clientX","hoverTarget","_classPrivateFieldGet3","_this$closest","icon","firstLink","bubbles","_classPrivateFieldGet4","_this$closest2","_this3","_focusableItems$","_focusableItems","focusableItems","from","currentIndex","indexOf","activeElement","preventDefault","_defineProperty","customElements","define"],"mappings":"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"}