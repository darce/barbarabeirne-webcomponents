{"version":3,"file":"dax-sidebar.js","sources":["../../../src/components/base/base-component.js","../../../src/components/dax-sidebar/dax-sidebar.js"],"sourcesContent":["/**\n * Module-level state store using WeakMaps for automatic garbage collection.\n * Private to this module - components access state via class methods.\n */\nconst stateMap = new WeakMap();\nconst refsMap = new WeakMap();\n\n/**\n * BaseComponent mixin - provides common functionality for web components.\n *\n * Public API (for subclasses):\n *   State:      initComponent, getComponentState, setComponentState,\n *                getComponentRefs, setComponentRefs\n *   Styles:     initStyles (reads static styles/stylesId)\n *   DOM:        initShadow, initLightDOM, queryRefs, queryLightRefs\n *   Attributes: getNumberAttr, getBooleanAttr, getStringAttr\n *   Events:     addManagedListener\n *   Timers:     setManagedInterval, clearManagedInterval, setManagedTimeout, clearManagedTimeout\n *   Cleanup:    cleanup (call in disconnectedCallback)\n */\nconst BaseComponent = (Base = HTMLElement) => class extends Base {\n    // Private fields\n    #listeners = [];\n\n    #timers = { intervals: [], timeouts: [] };\n\n    // ─────────────────────────────────────────────────────────────\n    // State Management (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    initComponent(state = {}, refs = {}) {\n        stateMap.set(this, state);\n        refsMap.set(this, refs);\n    }\n\n    getComponentState() {\n        return stateMap.get(this);\n    }\n\n    setComponentState(updates = {}) {\n        const state = stateMap.get(this);\n        if (!state) return;\n        Object.assign(state, updates);\n    }\n\n    getComponentRefs() {\n        return refsMap.get(this);\n    }\n\n    setComponentRefs(refs = {}) {\n        refsMap.set(this, refs);\n    }\n\n    #destroyComponent() {\n        stateMap.delete(this);\n        refsMap.delete(this);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Styles (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    /**\n     * Inject component styles into document head.\n     * Reads styles from static `styles` and `stylesId` properties.\n     * Only injects once per unique ID.\n     */\n    initStyles() {\n        const { styles, stylesId } = this.constructor;\n        if (!styles || !stylesId) return;\n        if (document.getElementById(stylesId)) return;\n        const styleEl = document.createElement('style');\n        styleEl.id = stylesId;\n        styleEl.textContent = styles;\n        document.head.appendChild(styleEl);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // DOM Initialization (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    initShadow(template, mode = 'open') {\n        const shadow = this.attachShadow({ mode });\n        shadow.appendChild(template.content.cloneNode(true));\n        return shadow;\n    }\n\n    initLightDOM(template) {\n        this.appendChild(template.content.cloneNode(true));\n    }\n\n    queryRefs(selectors = {}) {\n        const shadow = this.shadowRoot;\n        if (!shadow) return {};\n\n        const refs = {};\n        Object.entries(selectors).forEach(([key, selector]) => {\n            refs[key] = shadow.querySelector(selector);\n        });\n        return refs;\n    }\n\n    queryLightRefs(selectors = {}) {\n        const refs = {};\n        Object.entries(selectors).forEach(([key, selector]) => {\n            refs[key] = this.querySelector(selector);\n        });\n        return refs;\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Attribute Helpers (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    getNumberAttr(name, defaultValue = 0) {\n        const value = this.getAttribute(name);\n        return value !== null ? Number(value) : defaultValue;\n    }\n\n    getBooleanAttr(name) {\n        return this.hasAttribute(name);\n    }\n\n    getStringAttr(name, defaultValue = '') {\n        return this.getAttribute(name) ?? defaultValue;\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Event Listener Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    addManagedListener(target, event, handler, options) {\n        target.addEventListener(event, handler, options);\n        this.#listeners.push({\n            target,\n            event,\n            handler,\n            options,\n        });\n    }\n\n    #removeAllListeners() {\n        this.#listeners.forEach(({\n            target,\n            event,\n            handler,\n            options,\n        }) => {\n            target.removeEventListener(event, handler, options);\n        });\n        this.#listeners = [];\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Timer Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    setManagedInterval(callback, delay) {\n        const id = setInterval(callback, delay);\n        this.#timers.intervals.push(id);\n        return id;\n    }\n\n    clearManagedInterval(id) {\n        clearInterval(id);\n        this.#timers.intervals = this.#timers.intervals.filter((i) => i !== id);\n    }\n\n    setManagedTimeout(callback, delay) {\n        const id = setTimeout(callback, delay);\n        this.#timers.timeouts.push(id);\n        return id;\n    }\n\n    clearManagedTimeout(id) {\n        clearTimeout(id);\n        this.#timers.timeouts = this.#timers.timeouts.filter((i) => i !== id);\n    }\n\n    #clearAllTimers() {\n        this.#timers.intervals.forEach((id) => clearInterval(id));\n        this.#timers.timeouts.forEach((id) => clearTimeout(id));\n        this.#timers = { intervals: [], timeouts: [] };\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Cleanup (Public API - call in disconnectedCallback)\n    // ─────────────────────────────────────────────────────────────\n\n    cleanup() {\n        this.#removeAllListeners();\n        this.#clearAllTimers();\n        this.#destroyComponent();\n    }\n};\n\nexport default BaseComponent;\n","import BaseComponent from '../base/base-component';\n// CSS is pre-compiled by build:css to lib/components/dax-sidebar/dax-sidebar.css\nimport styles from '../../../lib/components/dax-sidebar/dax-sidebar.css';\n\nconst NAV_AUTO_CLOSE_DELAY_MS = 5000;\n\nconst TEMPLATE = `\n<aside class=\"dax-sidebar\" id=\"sidebar\" role=\"navigation\" aria-label=\"Main navigation\">\n    <header class=\"dax-sidebar-header\">\n        <button class=\"dax-sidebar-toggle\" type=\"button\" aria-label=\"Open menu\" aria-expanded=\"false\" aria-controls=\"dax-nav-menu\">\n            <span class=\"material-symbols-sharp\" aria-hidden=\"true\">menu</span>\n        </button>\n        <h1 class=\"masthead\"><a href=\"/\" id=\"home-link\">Barbara Beirne</a></h1>\n    </header>\n    <slot></slot>\n</aside>\n<div class=\"dax-sidebar-backdrop\" aria-hidden=\"true\"></div>\n`;\n\nclass DaxSidebar extends BaseComponent(HTMLElement) {\n    static styles = styles;\n\n    static stylesId = 'dax-sidebar-styles';\n\n    #isMenuOpen = false;\n\n    #refs = {};\n\n    #lastFocusedElement = null;\n\n    #wasModalOpen = false;\n\n    #inertTargets = new Map();\n\n    #scrollState = { body: '', html: '' };\n\n    #isScrollLocked = false;\n\n    #autoCloseTimerId = null;\n\n    static get observedAttributes() {\n        return ['home-link'];\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (name === 'home-link' && oldValue !== newValue) {\n            this.#updateHomeLink();\n        }\n    }\n\n    connectedCallback() {\n        this.#render();\n        this.#updateHomeLink();\n        this.#initMenuState();\n        this.#initTouchGestures();\n        this.#attachEventListeners();\n        this.addManagedListener(window, 'resize', () => this.#applyModalState());\n        this.#initCarouselListener();\n    }\n\n    disconnectedCallback() {\n        this.#clearAutoCloseTimer();\n        this.cleanup();\n    }\n\n    #render() {\n        if (!this.shadowRoot) {\n            if (this.initShadow) {\n                const template = document.createElement('template');\n                // Inject styles directly into Shadow DOM\n                template.innerHTML = `<style>${DaxSidebar.styles}</style>${TEMPLATE}`;\n                this.initShadow(template);\n            } else {\n                // Fallback if initShadow is not available (e.g. if BaseComponent mixin issue)\n                this.attachShadow({ mode: 'open' });\n                const template = document.createElement('template');\n                template.innerHTML = `<style>${DaxSidebar.styles}</style>${TEMPLATE}`;\n                this.shadowRoot.appendChild(template.content.cloneNode(true));\n            }\n        } else if (!this.shadowRoot.querySelector('aside')) {\n            // Shadow root exists but content might be missing\n            const template = document.createElement('template');\n            template.innerHTML = `<style>${DaxSidebar.styles}</style>${TEMPLATE}`;\n            this.shadowRoot.appendChild(template.content.cloneNode(true));\n        }\n\n        this.#refs = {\n            container: this.shadowRoot.querySelector('.dax-sidebar'),\n            toggle: this.shadowRoot.querySelector('.dax-sidebar-toggle'),\n            nav: this.querySelector('dax-nav'),\n            backdrop: this.shadowRoot.querySelector('.dax-sidebar-backdrop'),\n        };\n    }\n\n    #updateHomeLink() {\n        const link = this.getAttribute('home-link') || '/';\n        const anchor = this.shadowRoot?.querySelector('#home-link');\n        if (anchor) {\n            anchor.setAttribute('href', link);\n        }\n    }\n\n    #getNavBreakpoint() {\n        const value = getComputedStyle(this)\n            .getPropertyValue('--dax-sidebar-breakpoint-nav')\n            .trim();\n        const parsed = Number.parseFloat(value);\n\n        return Number.isNaN(parsed) ? 0 : parsed;\n    }\n\n    #isDesktopView() {\n        return window.innerWidth > this.#getNavBreakpoint();\n    }\n\n    #initMenuState() {\n        const nav = this.#getNavElement();\n        const navState = nav?.getAttribute('data-open');\n        const hasExplicitState = navState === 'true' || navState === 'false';\n        const isDesktop = this.#isDesktopView();\n\n        this.#isMenuOpen = hasExplicitState ? navState === 'true' : isDesktop;\n        this.#applyMenuState();\n        this.#emitMenuToggle(false, 'init');\n    }\n\n    #getNavElement() {\n        if (!this.#refs.nav) {\n            this.#refs.nav = this.querySelector('dax-nav');\n        }\n\n        return this.#refs.nav;\n    }\n\n    #applyMenuState() {\n        const { toggle } = this.#refs;\n        const nav = this.#getNavElement();\n        const isOpen = this.#isMenuOpen;\n\n        this.setAttribute('data-nav-open', isOpen ? 'true' : 'false');\n\n        if (nav) {\n            nav.setAttribute('data-open', isOpen ? 'true' : 'false');\n            if (isOpen) {\n                nav.removeAttribute('aria-hidden');\n            } else {\n                nav.setAttribute('aria-hidden', 'true');\n            }\n        }\n\n        if (toggle) {\n            toggle.setAttribute('aria-expanded', String(isOpen));\n            toggle.setAttribute('aria-label', isOpen ? 'Close menu' : 'Open menu');\n            const icon = toggle.querySelector('.material-symbols-sharp');\n            if (icon) icon.textContent = isOpen ? 'close' : 'menu';\n        }\n\n        this.#applyModalState();\n    }\n\n    #emitMenuToggle(emitOverlay = true, source = 'menu') {\n        const isOpen = this.#isMenuOpen;\n\n        this.dispatchEvent(new CustomEvent('dax-nav-toggle', {\n            detail: { isOpen, source },\n            bubbles: true,\n            composed: true,\n        }));\n\n        if (emitOverlay) {\n            this.dispatchEvent(new CustomEvent('ui-overlay-toggle', {\n                detail: { source: 'menu', isOpen },\n                bubbles: true,\n                composed: true,\n            }));\n        }\n    }\n\n    #setMenuOpen(isOpen, emitEvent = true, source = 'menu') {\n        if (this.#isMenuOpen === isOpen) {\n            return;\n        }\n\n        this.#isMenuOpen = isOpen;\n        this.#applyMenuState();\n\n        if (emitEvent) {\n            this.#emitMenuToggle(true, source);\n        }\n    }\n\n    #attachEventListeners() {\n        const { toggle, backdrop } = this.#refs;\n\n        if (toggle) {\n            this.addManagedListener(toggle, 'click', () => this.#toggleMenu());\n        }\n\n        if (backdrop) {\n            this.addManagedListener(backdrop, 'click', () => this.#closeMenu());\n        }\n\n        this.addManagedListener(document, 'keydown', (event) => {\n            if (event.key === 'Escape' && this.#isMenuOpen) {\n                this.#closeMenu();\n                toggle?.focus();\n            } else if (event.key === 'Tab') {\n                this.#handleTabKey(event);\n            }\n        });\n    }\n\n    #handleTabKey(event) {\n        // Only trap on mobile when menu is open\n        if (!this.#isMenuOpen || this.#isDesktopView()) return;\n\n        const focusableElements = this.#getFocusableElements();\n\n        if (focusableElements.length === 0) return;\n\n        const first = focusableElements[0];\n        const last = focusableElements[focusableElements.length - 1];\n\n        const currentFocus = this.shadowRoot.activeElement || document.activeElement;\n\n        if (event.shiftKey && currentFocus === first) {\n            event.preventDefault();\n            last.focus();\n        } else if (!event.shiftKey && currentFocus === last) {\n            event.preventDefault();\n            first.focus();\n        }\n    }\n\n    #getFocusableElements() {\n        const shadowFocusable = Array.from(this.shadowRoot.querySelectorAll(\n            'a[href], button:not([disabled]), [tabindex]:not([tabindex=\"-1\"])',\n        ));\n        const lightFocusable = Array.from(this.querySelectorAll(\n            'a[href], button:not([disabled]), [tabindex]:not([tabindex=\"-1\"])',\n        ));\n        return [...shadowFocusable, ...lightFocusable];\n    }\n\n    #applyModalState() {\n        const isModalOpen = this.#isMenuOpen && !this.#isDesktopView();\n\n        this.#setInertState(isModalOpen);\n        this.#setScrollLock(isModalOpen);\n\n        if (isModalOpen && !this.#wasModalOpen) {\n            this.#captureLastFocus();\n            this.#focusFirstElement();\n        } else if (!isModalOpen && this.#wasModalOpen) {\n            this.#restoreFocus();\n        }\n\n        this.#wasModalOpen = isModalOpen;\n    }\n\n    #captureLastFocus() {\n        const activeElement = this.shadowRoot.activeElement || document.activeElement;\n        this.#lastFocusedElement = activeElement instanceof HTMLElement ? activeElement : null;\n    }\n\n    #focusFirstElement() {\n        const { toggle } = this.#refs;\n        const focusableElements = this.#getFocusableElements();\n        const focusTarget = focusableElements.find((element) => element !== toggle)\n            || focusableElements[0];\n        focusTarget?.focus();\n    }\n\n    #restoreFocus() {\n        const { toggle } = this.#refs;\n        const hasLastFocus = this.#lastFocusedElement\n            && document.contains(this.#lastFocusedElement);\n        const focusTarget = hasLastFocus ? this.#lastFocusedElement : toggle;\n\n        focusTarget?.focus();\n        this.#lastFocusedElement = null;\n    }\n\n    #getInertTargets() {\n        const parent = this.parentElement || document.body;\n        return Array.from(parent.children).filter((child) => child !== this);\n    }\n\n    #setInertState(shouldInert) {\n        if (shouldInert && this.#inertTargets.size === 0) {\n            this.#getInertTargets().forEach((element) => {\n                this.#inertTargets.set(element, element.getAttribute('aria-hidden'));\n            });\n        }\n\n        this.#inertTargets.forEach((previousAriaHidden, element) => {\n            const target = element;\n            if (shouldInert) {\n                target.setAttribute('aria-hidden', 'true');\n                target.inert = true;\n                target.setAttribute('inert', '');\n            } else {\n                if (previousAriaHidden === null) {\n                    target.removeAttribute('aria-hidden');\n                } else {\n                    target.setAttribute('aria-hidden', previousAriaHidden);\n                }\n                target.inert = false;\n                target.removeAttribute('inert');\n            }\n        });\n\n        if (!shouldInert) {\n            this.#inertTargets.clear();\n        }\n    }\n\n    #setScrollLock(shouldLock) {\n        if (shouldLock) {\n            if (this.#isScrollLocked) return;\n            this.#scrollState = {\n                html: document.documentElement.style.overflow,\n                body: document.body.style.overflow,\n            };\n            document.documentElement.style.overflow = 'hidden';\n            document.body.style.overflow = 'hidden';\n            this.#isScrollLocked = true;\n            return;\n        }\n\n        if (!this.#isScrollLocked) return;\n        document.documentElement.style.overflow = this.#scrollState.html;\n        document.body.style.overflow = this.#scrollState.body;\n        this.#scrollState = { body: '', html: '' };\n        this.#isScrollLocked = false;\n    }\n\n    #initTouchGestures() {\n        let startX = 0;\n        let startY = 0;\n        const SWIPE_THRESHOLD = 50;\n        const EDGE_ZONE = 30; // pixels from left edge\n\n        this.addManagedListener(document, 'touchstart', (e) => {\n            if (e.touches.length > 1) return;\n            startX = e.touches[0].clientX;\n            startY = e.touches[0].clientY;\n        }, { passive: true });\n\n        this.addManagedListener(document, 'touchend', (e) => {\n            if (e.changedTouches.length > 1) return;\n            const deltaX = e.changedTouches[0].clientX - startX;\n            const deltaY = e.changedTouches[0].clientY - startY;\n\n            // Ignore vertical swipes\n            if (Math.abs(deltaY) > Math.abs(deltaX)) return;\n\n            const isLeftEdge = startX < EDGE_ZONE;\n\n            // Swipe right from left edge -> open\n            if (isLeftEdge && deltaX > SWIPE_THRESHOLD && !this.#isMenuOpen) {\n                this.#openMenu();\n            } else if (deltaX < -SWIPE_THRESHOLD && this.#isMenuOpen) {\n                // Swipe left anywhere -> close (when open)\n                this.#closeMenu();\n            }\n        }, { passive: true });\n    }\n\n    #toggleMenu() {\n        this.#setMenuOpen(!this.#isMenuOpen);\n    }\n\n    #openMenu() {\n        this.#setMenuOpen(true);\n    }\n\n    #closeMenu() {\n        this.#setMenuOpen(false);\n    }\n\n    #closeNavOnly() {\n        // Close nav quietly using standard state management but suppressing events\n        // This ensures toggle button and host attributes remain in sync\n        this.#setMenuOpen(false, false);\n    }\n\n    #isGalleryPage() {\n        // Gallery pages have a <main data-gallery-context> element\n        return document.querySelector('main[data-gallery-context]') !== null;\n    }\n\n    #initAutoCloseTimer() {\n        // Only auto-close dax-nav on gallery pages\n        if (!this.#isGalleryPage()) {\n            return;\n        }\n\n        this.#clearAutoCloseTimer();\n        this.#autoCloseTimerId = setTimeout(() => {\n            if (this.#isMenuOpen) {\n                this.#closeNavOnly();\n            }\n        }, NAV_AUTO_CLOSE_DELAY_MS);\n    }\n\n    #clearAutoCloseTimer() {\n        if (this.#autoCloseTimerId !== null) {\n            clearTimeout(this.#autoCloseTimerId);\n            this.#autoCloseTimerId = null;\n        }\n    }\n\n    #initCarouselListener() {\n        // Close nav after inactivity when carousel auto-play starts (only on gallery pages)\n        if (!this.#isGalleryPage()) {\n            return;\n        }\n\n        const startInactivityTimer = () => {\n            // Only start timer if sidebar is open and no timer is already running\n            if (this.#isMenuOpen && this.#autoCloseTimerId === null) {\n                this.#autoCloseTimerId = setTimeout(() => {\n                    if (this.#isMenuOpen) {\n                        this.#closeNavOnly();\n                    }\n                    this.#autoCloseTimerId = null;\n                }, NAV_AUTO_CLOSE_DELAY_MS);\n            }\n        };\n\n        // Start timer when autoplay is activated by user\n        this.addManagedListener(document, 'dax-carousel-autoplay-start', startInactivityTimer);\n\n        // Also start timer on slide advance (for when autoplay was already running)\n        this.addManagedListener(document, 'dax-carousel-advance', startInactivityTimer);\n    }\n}\n\ncustomElements.define('dax-sidebar', DaxSidebar);\n\nexport default DaxSidebar;\n"],"names":["stateMap","WeakMap","refsMap","BaseComponent","_listeners","_timers","_Class_brand","Base","arguments","length","undefined","HTMLElement","WeakSet","_Base","_class","_this","_classCallCheck","_len","args","Array","_key","_callSuper","concat","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","intervals","timeouts","_inherits","_createClass","key","value","initComponent","state","refs","set","getComponentState","get","setComponentState","updates","Object","assign","getComponentRefs","setComponentRefs","initStyles","_this$constructor","constructor","styles","stylesId","document","getElementById","styleEl","createElement","id","textContent","head","appendChild","initShadow","template","mode","shadow","attachShadow","content","cloneNode","initLightDOM","queryRefs","selectors","shadowRoot","entries","forEach","_ref","_ref2","_slicedToArray","selector","querySelector","queryLightRefs","_this2","_ref3","_ref4","getNumberAttr","name","defaultValue","getAttribute","Number","getBooleanAttr","hasAttribute","getStringAttr","_this$getAttribute","addManagedListener","target","event","handler","options","addEventListener","_classPrivateFieldGet","push","setManagedInterval","callback","delay","setInterval","clearManagedInterval","clearInterval","filter","i","setManagedTimeout","setTimeout","clearManagedTimeout","clearTimeout","cleanup","_assertClassBrand","_removeAllListeners","call","_clearAllTimers","_destroyComponent","_ref5","removeEventListener","_classPrivateFieldSet","NAV_AUTO_CLOSE_DELAY_MS","TEMPLATE","_isMenuOpen","_refs","_lastFocusedElement","_wasModalOpen","_inertTargets","_scrollState","_isScrollLocked","_autoCloseTimerId","_DaxSidebar_brand","DaxSidebar","_BaseComponent","Map","body","html","attributeChangedCallback","oldValue","newValue","_updateHomeLink","connectedCallback","_render","_initMenuState","_initTouchGestures","_attachEventListeners","window","_applyModalState","_initCarouselListener","disconnectedCallback","_clearAutoCloseTimer","_DaxSidebar","innerHTML","container","toggle","nav","backdrop","_this$shadowRoot","link","anchor","setAttribute","_getNavBreakpoint","getComputedStyle","getPropertyValue","trim","parsed","parseFloat","isNaN","_isDesktopView","innerWidth","_getNavElement","navState","hasExplicitState","isDesktop","_applyMenuState","_emitMenuToggle","_classPrivateFieldGet2","isOpen","removeAttribute","String","icon","emitOverlay","source","dispatchEvent","CustomEvent","detail","bubbles","composed","_setMenuOpen","emitEvent","_this3","_classPrivateFieldGet3","_toggleMenu","_closeMenu","focus","_handleTabKey","focusableElements","_getFocusableElements","first","last","currentFocus","activeElement","shiftKey","preventDefault","shadowFocusable","from","querySelectorAll","lightFocusable","isModalOpen","_setInertState","_setScrollLock","_captureLastFocus","_focusFirstElement","_restoreFocus","_classPrivateFieldGet4","focusTarget","find","element","_classPrivateFieldGet5","hasLastFocus","contains","_getInertTargets","_this4","parent","parentElement","children","child","shouldInert","_this5","size","previousAriaHidden","inert","clear","shouldLock","documentElement","style","overflow","_this6","startX","startY","SWIPE_THRESHOLD","EDGE_ZONE","e","touches","clientX","clientY","passive","changedTouches","deltaX","deltaY","Math","abs","isLeftEdge","_openMenu","_closeNavOnly","_isGalleryPage","_this8","startInactivityTimer","_defineProperty","customElements","define"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA,IAAMA,QAAQ,GAAG,IAAIC,OAAO,EAAE;AAC9B,IAAMC,OAAO,GAAG,IAAID,OAAO,EAAE;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAME,aAAa,GAAG,SAAhBA,aAAaA,GAAA;AAAA,EAAA,IAAAC,UAAA,EAAAC,OAAA,EAAAC,YAAA;AAAA,EAAA,IAAIC,IAAI,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAGG,WAAW;AAAA,EAAA,OAAAP,UAAA,gBAAA,IAAAH,OAAA,EAAA,EAAAI,OAAA,gBAAA,IAAAJ,OAAA,EAAA,EAAAK,YAAA,gBAAA,IAAAM,OAAA,EAAA,eAAA,UAAAC,KAAA,EAAA;AAAA,IAAA,SAAAC,MAAAA,GAAA;AAAA,MAAA,IAAAC,KAAA;AAAAC,MAAAA,eAAA,OAAAF,MAAA,CAAA;AAAA,MAAA,KAAA,IAAAG,IAAA,GAAAT,SAAA,CAAAC,MAAA,EAAAS,IAAA,GAAA,IAAAC,KAAA,CAAAF,IAAA,GAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAAF,QAAAA,IAAA,CAAAE,IAAA,CAAA,GAAAZ,SAAA,CAAAY,IAAA,CAAA;AAAA,MAAA;AAAAL,MAAAA,KAAA,GAAAM,UAAA,CAAA,IAAA,EAAAP,MAAA,EAAA,EAAA,CAAAQ,MAAA,CAAAJ,IAAA,CAAA,CAAA;MAAAK,2BAAA,CAAAR,KAAA,EAAAT,YAAA,CAAA;AACrC;AACAkB,MAAAA,0BAAA,CAAAT,KAAA,EAAAX,UAAU,EAAG,EAAE,CAAA;AAEfoB,MAAAA,0BAAA,CAAAT,KAAA,EAAAV,OAAO,EAAG;AAAEoB,QAAAA,SAAS,EAAE,EAAE;AAAEC,QAAAA,QAAQ,EAAE;OAAI,CAAA;AAAC,MAAA,OAAAX,KAAA;AAAA,IAAA;IAAAY,SAAA,CAAAb,MAAA,EAAAD,KAAA,CAAA;IAAA,OAAAe,YAAA,CAAAd,MAAA,EAAA,CAAA;MAAAe,GAAA,EAAA,eAAA;MAAAC,KAAA;AAE1C;AACA;AACA;;MAEA,SAAAC,aAAaA,GAAwB;AAAA,QAAA,IAAvBC,KAAK,GAAAxB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AAAA,QAAA,IAAEyB,IAAI,GAAAzB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AAC/BR,QAAAA,QAAQ,CAACkC,GAAG,CAAC,IAAI,EAAEF,KAAK,CAAC;AACzB9B,QAAAA,OAAO,CAACgC,GAAG,CAAC,IAAI,EAAED,IAAI,CAAC;AAC3B,MAAA;AAAC,KAAA,EAAA;MAAAJ,GAAA,EAAA,mBAAA;AAAAC,MAAAA,KAAA,EAED,SAAAK,iBAAiBA,GAAG;AAChB,QAAA,OAAOnC,QAAQ,CAACoC,GAAG,CAAC,IAAI,CAAC;AAC7B,MAAA;AAAC,KAAA,EAAA;MAAAP,GAAA,EAAA,mBAAA;AAAAC,MAAAA,KAAA,EAED,SAAAO,iBAAiBA,GAAe;AAAA,QAAA,IAAdC,OAAO,GAAA9B,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AAC1B,QAAA,IAAMwB,KAAK,GAAGhC,QAAQ,CAACoC,GAAG,CAAC,IAAI,CAAC;QAChC,IAAI,CAACJ,KAAK,EAAE;AACZO,QAAAA,MAAM,CAACC,MAAM,CAACR,KAAK,EAAEM,OAAO,CAAC;AACjC,MAAA;AAAC,KAAA,EAAA;MAAAT,GAAA,EAAA,kBAAA;AAAAC,MAAAA,KAAA,EAED,SAAAW,gBAAgBA,GAAG;AACf,QAAA,OAAOvC,OAAO,CAACkC,GAAG,CAAC,IAAI,CAAC;AAC5B,MAAA;AAAC,KAAA,EAAA;MAAAP,GAAA,EAAA,kBAAA;AAAAC,MAAAA,KAAA,EAED,SAAAY,gBAAgBA,GAAY;AAAA,QAAA,IAAXT,IAAI,GAAAzB,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AACtBN,QAAAA,OAAO,CAACgC,GAAG,CAAC,IAAI,EAAED,IAAI,CAAC;AAC3B,MAAA;AAAC,KAAA,EAAA;MAAAJ,GAAA,EAAA,YAAA;MAAAC,KAAA;AAOD;AACA;AACA;;AAEA;AACJ;AACA;AACA;AACA;MACI,SAAAa,UAAUA,GAAG;AACT,QAAA,IAAAC,iBAAA,GAA6B,IAAI,CAACC,WAAW;UAArCC,MAAM,GAAAF,iBAAA,CAANE,MAAM;UAAEC,QAAQ,GAAAH,iBAAA,CAARG,QAAQ;AACxB,QAAA,IAAI,CAACD,MAAM,IAAI,CAACC,QAAQ,EAAE;AAC1B,QAAA,IAAIC,QAAQ,CAACC,cAAc,CAACF,QAAQ,CAAC,EAAE;AACvC,QAAA,IAAMG,OAAO,GAAGF,QAAQ,CAACG,aAAa,CAAC,OAAO,CAAC;QAC/CD,OAAO,CAACE,EAAE,GAAGL,QAAQ;QACrBG,OAAO,CAACG,WAAW,GAAGP,MAAM;AAC5BE,QAAAA,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACL,OAAO,CAAC;AACtC,MAAA;;AAEA;AACA;AACA;AAAA,KAAA,EAAA;MAAArB,GAAA,EAAA,YAAA;AAAAC,MAAAA,KAAA,EAEA,SAAA0B,UAAUA,CAACC,QAAQ,EAAiB;AAAA,QAAA,IAAfC,IAAI,GAAAlD,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,MAAM;AAC9B,QAAA,IAAMmD,MAAM,GAAG,IAAI,CAACC,YAAY,CAAC;AAAEF,UAAAA,IAAI,EAAJA;AAAK,SAAC,CAAC;QAC1CC,MAAM,CAACJ,WAAW,CAACE,QAAQ,CAACI,OAAO,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;AACpD,QAAA,OAAOH,MAAM;AACjB,MAAA;AAAC,KAAA,EAAA;MAAA9B,GAAA,EAAA,cAAA;AAAAC,MAAAA,KAAA,EAED,SAAAiC,YAAYA,CAACN,QAAQ,EAAE;QACnB,IAAI,CAACF,WAAW,CAACE,QAAQ,CAACI,OAAO,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;AACtD,MAAA;AAAC,KAAA,EAAA;MAAAjC,GAAA,EAAA,WAAA;AAAAC,MAAAA,KAAA,EAED,SAAAkC,SAASA,GAAiB;AAAA,QAAA,IAAhBC,SAAS,GAAAzD,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AACpB,QAAA,IAAMmD,MAAM,GAAG,IAAI,CAACO,UAAU;AAC9B,QAAA,IAAI,CAACP,MAAM,EAAE,OAAO,EAAE;QAEtB,IAAM1B,IAAI,GAAG,EAAE;QACfM,MAAM,CAAC4B,OAAO,CAACF,SAAS,CAAC,CAACG,OAAO,CAAC,UAAAC,IAAA,EAAqB;AAAA,UAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA,EAAA,CAAA,CAAA;AAAnBxC,YAAAA,GAAG,GAAAyC,KAAA,CAAA,CAAA,CAAA;AAAEE,YAAAA,QAAQ,GAAAF,KAAA,CAAA,CAAA,CAAA;UAC7CrC,IAAI,CAACJ,GAAG,CAAC,GAAG8B,MAAM,CAACc,aAAa,CAACD,QAAQ,CAAC;AAC9C,QAAA,CAAC,CAAC;AACF,QAAA,OAAOvC,IAAI;AACf,MAAA;AAAC,KAAA,EAAA;MAAAJ,GAAA,EAAA,gBAAA;AAAAC,MAAAA,KAAA,EAED,SAAA4C,cAAcA,GAAiB;AAAA,QAAA,IAAAC,MAAA,GAAA,IAAA;AAAA,QAAA,IAAhBV,SAAS,GAAAzD,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;QACzB,IAAMyB,IAAI,GAAG,EAAE;QACfM,MAAM,CAAC4B,OAAO,CAACF,SAAS,CAAC,CAACG,OAAO,CAAC,UAAAQ,KAAA,EAAqB;AAAA,UAAA,IAAAC,KAAA,GAAAN,cAAA,CAAAK,KAAA,EAAA,CAAA,CAAA;AAAnB/C,YAAAA,GAAG,GAAAgD,KAAA,CAAA,CAAA,CAAA;AAAEL,YAAAA,QAAQ,GAAAK,KAAA,CAAA,CAAA,CAAA;UAC7C5C,IAAI,CAACJ,GAAG,CAAC,GAAG8C,MAAI,CAACF,aAAa,CAACD,QAAQ,CAAC;AAC5C,QAAA,CAAC,CAAC;AACF,QAAA,OAAOvC,IAAI;AACf,MAAA;;AAEA;AACA;AACA;AAAA,KAAA,EAAA;MAAAJ,GAAA,EAAA,eAAA;AAAAC,MAAAA,KAAA,EAEA,SAAAgD,aAAaA,CAACC,IAAI,EAAoB;AAAA,QAAA,IAAlBC,YAAY,GAAAxE,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,CAAC;AAChC,QAAA,IAAMsB,KAAK,GAAG,IAAI,CAACmD,YAAY,CAACF,IAAI,CAAC;QACrC,OAAOjD,KAAK,KAAK,IAAI,GAAGoD,MAAM,CAACpD,KAAK,CAAC,GAAGkD,YAAY;AACxD,MAAA;AAAC,KAAA,EAAA;MAAAnD,GAAA,EAAA,gBAAA;AAAAC,MAAAA,KAAA,EAED,SAAAqD,cAAcA,CAACJ,IAAI,EAAE;AACjB,QAAA,OAAO,IAAI,CAACK,YAAY,CAACL,IAAI,CAAC;AAClC,MAAA;AAAC,KAAA,EAAA;MAAAlD,GAAA,EAAA,eAAA;AAAAC,MAAAA,KAAA,EAED,SAAAuD,aAAaA,CAACN,IAAI,EAAqB;AAAA,QAAA,IAAAO,kBAAA;AAAA,QAAA,IAAnBN,YAAY,GAAAxE,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE;AACjC,QAAA,OAAA,CAAA8E,kBAAA,GAAO,IAAI,CAACL,YAAY,CAACF,IAAI,CAAC,MAAA,IAAA,IAAAO,kBAAA,KAAA,MAAA,GAAAA,kBAAA,GAAIN,YAAY;AAClD,MAAA;;AAEA;AACA;AACA;AAAA,KAAA,EAAA;MAAAnD,GAAA,EAAA,oBAAA;MAAAC,KAAA,EAEA,SAAAyD,kBAAkBA,CAACC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEC,OAAO,EAAE;QAChDH,MAAM,CAACI,gBAAgB,CAACH,KAAK,EAAEC,OAAO,EAAEC,OAAO,CAAC;AAChDE,QAAAA,sBAAA,CAAKzF,UAAU,EAAf,IAAc,CAAC,CAAC0F,IAAI,CAAC;AACjBN,UAAAA,MAAM,EAANA,MAAM;AACNC,UAAAA,KAAK,EAALA,KAAK;AACLC,UAAAA,OAAO,EAAPA,OAAO;AACPC,UAAAA,OAAO,EAAPA;AACJ,SAAC,CAAC;AACN,MAAA;AAAC,KAAA,EAAA;MAAA9D,GAAA,EAAA,oBAAA;MAAAC,KAAA;AAcD;AACA;AACA;;AAEA,MAAA,SAAAiE,kBAAkBA,CAACC,QAAQ,EAAEC,KAAK,EAAE;AAChC,QAAA,IAAM7C,EAAE,GAAG8C,WAAW,CAACF,QAAQ,EAAEC,KAAK,CAAC;QACvCJ,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACoB,SAAS,CAACqE,IAAI,CAAC1C,EAAE,CAAC;AAC/B,QAAA,OAAOA,EAAE;AACb,MAAA;AAAC,KAAA,EAAA;MAAAvB,GAAA,EAAA,sBAAA;AAAAC,MAAAA,KAAA,EAED,SAAAqE,oBAAoBA,CAAC/C,EAAE,EAAE;QACrBgD,aAAa,CAAChD,EAAE,CAAC;QACjByC,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACoB,SAAS,GAAGoE,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACoB,SAAS,CAAC4E,MAAM,CAAC,UAACC,CAAC,EAAA;UAAA,OAAKA,CAAC,KAAKlD,EAAE;QAAA,CAAA,CAAC;AAC3E,MAAA;AAAC,KAAA,EAAA;MAAAvB,GAAA,EAAA,mBAAA;AAAAC,MAAAA,KAAA,EAED,SAAAyE,iBAAiBA,CAACP,QAAQ,EAAEC,KAAK,EAAE;AAC/B,QAAA,IAAM7C,EAAE,GAAGoD,UAAU,CAACR,QAAQ,EAAEC,KAAK,CAAC;QACtCJ,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACqB,QAAQ,CAACoE,IAAI,CAAC1C,EAAE,CAAC;AAC9B,QAAA,OAAOA,EAAE;AACb,MAAA;AAAC,KAAA,EAAA;MAAAvB,GAAA,EAAA,qBAAA;AAAAC,MAAAA,KAAA,EAED,SAAA2E,mBAAmBA,CAACrD,EAAE,EAAE;QACpBsD,YAAY,CAACtD,EAAE,CAAC;QAChByC,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACqB,QAAQ,GAAGmE,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACqB,QAAQ,CAAC2E,MAAM,CAAC,UAACC,CAAC,EAAA;UAAA,OAAKA,CAAC,KAAKlD,EAAE;QAAA,CAAA,CAAC;AACzE,MAAA;AAAC,KAAA,EAAA;MAAAvB,GAAA,EAAA,SAAA;MAAAC,KAAA;AAQD;AACA;AACA;;MAEA,SAAA6E,OAAOA,GAAG;QACNC,iBAAA,CAAAtG,YAAA,EAAA,IAAI,EAACuG,mBAAkB,CAAC,CAAAC,IAAA,CAAxB,IAAI,CAAA;QACJF,iBAAA,CAAAtG,YAAA,EAAA,IAAI,EAACyG,eAAc,CAAC,CAAAD,IAAA,CAApB,IAAI,CAAA;QACJF,iBAAA,CAAAtG,YAAA,EAAA,IAAI,EAAC0G,iBAAgB,CAAC,CAAAF,IAAA,CAAtB,IAAI,CAAA;AACR,MAAA;AAAC,KAAA,CAAA,CAAA;AAAA,EAAA,CAAA,CA7KuDvG,IAAI,CAAA;AAAA,EAAA,SAAAyG,oBAiCxC;IAChBhH,QAAQ,CAAA,QAAA,CAAO,CAAC,IAAI,CAAC;IACrBE,OAAO,CAAA,QAAA,CAAO,CAAC,IAAI,CAAC;AACxB,EAAA;AAAC,EAAA,SAAA2G,sBAqFqB;IAClBhB,sBAAA,CAAKzF,UAAU,EAAf,IAAc,CAAC,CAACgE,OAAO,CAAC,UAAA6C,KAAA,EAKlB;AAAA,MAAA,IAJFzB,MAAM,GAAAyB,KAAA,CAANzB,MAAM;QACNC,KAAK,GAAAwB,KAAA,CAALxB,KAAK;QACLC,OAAO,GAAAuB,KAAA,CAAPvB,OAAO;QACPC,OAAO,GAAAsB,KAAA,CAAPtB,OAAO;MAEPH,MAAM,CAAC0B,mBAAmB,CAACzB,KAAK,EAAEC,OAAO,EAAEC,OAAO,CAAC;AACvD,IAAA,CAAC,CAAC;AACFwB,IAAAA,sBAAA,CAAK/G,UAAU,EAAf,IAAI,EAAc,EAAJ,CAAC;AACnB,EAAA;AAAC,EAAA,SAAA2G,kBA4BiB;IACdlB,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACoB,SAAS,CAAC2C,OAAO,CAAC,UAAChB,EAAE,EAAA;MAAA,OAAKgD,aAAa,CAAChD,EAAE,CAAC;IAAA,CAAA,CAAC;IACzDyC,sBAAA,CAAKxF,OAAO,EAAZ,IAAW,CAAC,CAACqB,QAAQ,CAAC0C,OAAO,CAAC,UAAChB,EAAE,EAAA;MAAA,OAAKsD,YAAY,CAACtD,EAAE,CAAC;IAAA,CAAA,CAAC;AACvD+D,IAAAA,sBAAA,CAAK9G,OAAO,EAAZ,IAAI,EAAW;AAAEoB,MAAAA,SAAS,EAAE,EAAE;AAAEC,MAAAA,QAAQ,EAAE;AAAG,KAAlC,CAAC;AAChB,EAAA;AAAC,CAWJ;;;;;AC9LD,IAAM0F,uBAAuB,GAAG,IAAI;AAEpC,IAAMC,QAAQ,GAAA,2kBAWb;AAAC,IAAAC,WAAA,oBAAArH,OAAA,EAAA;AAAA,IAAAsH,KAAA,oBAAAtH,OAAA,EAAA;AAAA,IAAAuH,mBAAA,oBAAAvH,OAAA,EAAA;AAAA,IAAAwH,aAAA,oBAAAxH,OAAA,EAAA;AAAA,IAAAyH,aAAA,oBAAAzH,OAAA,EAAA;AAAA,IAAA0H,YAAA,oBAAA1H,OAAA,EAAA;AAAA,IAAA2H,eAAA,oBAAA3H,OAAA,EAAA;AAAA,IAAA4H,iBAAA,oBAAA5H,OAAA,EAAA;AAAA,IAAA6H,iBAAA,oBAAAlH,OAAA,EAAA;AAAA,IAEImH,UAAU,0BAAAC,cAAA,EAAA;AAAA,EAAA,SAAAD,UAAAA,GAAA;AAAA,IAAA,IAAAhH,KAAA;AAAAC,IAAAA,eAAA,OAAA+G,UAAA,CAAA;AAAA,IAAA,KAAA,IAAA9G,IAAA,GAAAT,SAAA,CAAAC,MAAA,EAAAS,IAAA,GAAA,IAAAC,KAAA,CAAAF,IAAA,GAAAG,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA,EAAA,EAAA;AAAAF,MAAAA,IAAA,CAAAE,IAAA,CAAA,GAAAZ,SAAA,CAAAY,IAAA,CAAA;AAAA,IAAA;AAAAL,IAAAA,KAAA,GAAAM,UAAA,CAAA,IAAA,EAAA0G,UAAA,EAAA,EAAA,CAAAzG,MAAA,CAAAJ,IAAA,CAAA,CAAA;IAAAK,2BAAA,CAAAR,KAAA,EAAA+G,iBAAA,CAAA;AAKZtG,IAAAA,0BAAA,CAAAT,KAAA,EAAAuG,WAAW,EAAG,KAAK,CAAA;AAEnB9F,IAAAA,0BAAA,CAAAT,KAAA,EAAAwG,KAAK,EAAG,EAAE,CAAA;AAEV/F,IAAAA,0BAAA,CAAAT,KAAA,EAAAyG,mBAAmB,EAAG,IAAI,CAAA;AAE1BhG,IAAAA,0BAAA,CAAAT,KAAA,EAAA0G,aAAa,EAAG,KAAK,CAAA;IAErBjG,0BAAA,CAAAT,KAAA,EAAA2G,aAAa,EAAG,IAAIO,GAAG,EAAE,CAAA;AAEzBzG,IAAAA,0BAAA,CAAAT,KAAA,EAAA4G,YAAY,EAAG;AAAEO,MAAAA,IAAI,EAAE,EAAE;AAAEC,MAAAA,IAAI,EAAE;KAAI,CAAA;AAErC3G,IAAAA,0BAAA,CAAAT,KAAA,EAAA6G,eAAe,EAAG,KAAK,CAAA;AAEvBpG,IAAAA,0BAAA,CAAAT,KAAA,EAAA8G,iBAAiB,EAAG,IAAI,CAAA;AAAC,IAAA,OAAA9G,KAAA;AAAA,EAAA;EAAAY,SAAA,CAAAoG,UAAA,EAAAC,cAAA,CAAA;EAAA,OAAApG,YAAA,CAAAmG,UAAA,EAAA,CAAA;IAAAlG,GAAA,EAAA,0BAAA;IAAAC,KAAA,EAMzB,SAAAsG,wBAAwBA,CAACrD,IAAI,EAAEsD,QAAQ,EAAEC,QAAQ,EAAE;AAC/C,MAAA,IAAIvD,IAAI,KAAK,WAAW,IAAIsD,QAAQ,KAAKC,QAAQ,EAAE;QAC/C1B,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACS,eAAc,CAAC,CAAAzB,IAAA,CAApB,IAAI,CAAA;AACR,MAAA;AACJ,IAAA;AAAC,GAAA,EAAA;IAAAjF,GAAA,EAAA,mBAAA;AAAAC,IAAAA,KAAA,EAED,SAAA0G,iBAAiBA,GAAG;AAAA,MAAA,IAAA7D,MAAA,GAAA,IAAA;MAChBiC,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACW,OAAM,CAAC,CAAA3B,IAAA,CAAZ,IAAI,CAAA;MACJF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACS,eAAc,CAAC,CAAAzB,IAAA,CAApB,IAAI,CAAA;MACJF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACY,cAAa,CAAC,CAAA5B,IAAA,CAAnB,IAAI,CAAA;MACJF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACa,kBAAiB,CAAC,CAAA7B,IAAA,CAAvB,IAAI,CAAA;MACJF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACc,qBAAoB,CAAC,CAAA9B,IAAA,CAA1B,IAAI,CAAA;AACJ,MAAA,IAAI,CAACvB,kBAAkB,CAACsD,MAAM,EAAE,QAAQ,EAAE,YAAA;QAAA,OAAMjC,iBAAA,CAAAkB,iBAAA,EAAAnD,MAAI,EAACmE,gBAAe,CAAC,CAAAhC,IAAA,CAArBnC,MAAI,CAAA;AAAA,MAAA,CAAmB,CAAC;MACxEiC,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACiB,qBAAoB,CAAC,CAAAjC,IAAA,CAA1B,IAAI,CAAA;AACR,IAAA;AAAC,GAAA,EAAA;IAAAjF,GAAA,EAAA,sBAAA;AAAAC,IAAAA,KAAA,EAED,SAAAkH,oBAAoBA,GAAG;MACnBpC,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACmB,oBAAmB,CAAC,CAAAnC,IAAA,CAAzB,IAAI,CAAA;MACJ,IAAI,CAACH,OAAO,EAAE;AAClB,IAAA;AAAC,GAAA,CAAA,EAAA,CAAA;IAAA9E,GAAA,EAAA,oBAAA;IAAAO,GAAA,EAvBD,SAAAA,GAAAA,GAAgC;MAC5B,OAAO,CAAC,WAAW,CAAC;AACxB,IAAA;AAAC,GAAA,CAAA,CAAA;AAAA,CAAA,CAvBoBjC,aAAa,CAACQ,WAAW,CAAC;AAAAuI,WAAA,GAA7CnB,UAAU;AAAA,SAAAU,UA8CF;AACN,EAAA,IAAI,CAAC,IAAI,CAACvE,UAAU,EAAE;IAClB,IAAI,IAAI,CAACV,UAAU,EAAE;AACjB,MAAA,IAAMC,QAAQ,GAAGT,QAAQ,CAACG,aAAa,CAAC,UAAU,CAAC;AACnD;AACAM,MAAAA,QAAQ,CAAC0F,SAAS,GAAA,SAAA,CAAA7H,MAAA,CAAayG,WAAU,CAACjF,MAAM,EAAA,UAAA,CAAA,CAAAxB,MAAA,CAAW+F,QAAQ,CAAE;AACrE,MAAA,IAAI,CAAC7D,UAAU,CAACC,QAAQ,CAAC;AAC7B,IAAA,CAAC,MAAM;AACH;MACA,IAAI,CAACG,YAAY,CAAC;AAAEF,QAAAA,IAAI,EAAE;AAAO,OAAC,CAAC;AACnC,MAAA,IAAMD,SAAQ,GAAGT,QAAQ,CAACG,aAAa,CAAC,UAAU,CAAC;AACnDM,MAAAA,SAAQ,CAAC0F,SAAS,GAAA,SAAA,CAAA7H,MAAA,CAAayG,WAAU,CAACjF,MAAM,EAAA,UAAA,CAAA,CAAAxB,MAAA,CAAW+F,QAAQ,CAAE;AACrE,MAAA,IAAI,CAACnD,UAAU,CAACX,WAAW,CAACE,SAAQ,CAACI,OAAO,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;AACjE,IAAA;EACJ,CAAC,MAAM,IAAI,CAAC,IAAI,CAACI,UAAU,CAACO,aAAa,CAAC,OAAO,CAAC,EAAE;AAChD;AACA,IAAA,IAAMhB,UAAQ,GAAGT,QAAQ,CAACG,aAAa,CAAC,UAAU,CAAC;AACnDM,IAAAA,UAAQ,CAAC0F,SAAS,GAAA,SAAA,CAAA7H,MAAA,CAAayG,WAAU,CAACjF,MAAM,EAAA,UAAA,CAAA,CAAAxB,MAAA,CAAW+F,QAAQ,CAAE;AACrE,IAAA,IAAI,CAACnD,UAAU,CAACX,WAAW,CAACE,UAAQ,CAACI,OAAO,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;AACjE,EAAA;AAEAqD,EAAAA,sBAAA,CAAKI,KAAK,EAAV,IAAI,EAAS;IACT6B,SAAS,EAAE,IAAI,CAAClF,UAAU,CAACO,aAAa,CAAC,cAAc,CAAC;IACxD4E,MAAM,EAAE,IAAI,CAACnF,UAAU,CAACO,aAAa,CAAC,qBAAqB,CAAC;AAC5D6E,IAAAA,GAAG,EAAE,IAAI,CAAC7E,aAAa,CAAC,SAAS,CAAC;AAClC8E,IAAAA,QAAQ,EAAE,IAAI,CAACrF,UAAU,CAACO,aAAa,CAAC,uBAAuB;AACnE,GALS,CAAC;AAMd;AAAC,SAAA8D,kBAEiB;AAAA,EAAA,IAAAiB,gBAAA;EACd,IAAMC,IAAI,GAAG,IAAI,CAACxE,YAAY,CAAC,WAAW,CAAC,IAAI,GAAG;AAClD,EAAA,IAAMyE,MAAM,GAAA,CAAAF,gBAAA,GAAG,IAAI,CAACtF,UAAU,MAAA,IAAA,IAAAsF,gBAAA,uBAAfA,gBAAA,CAAiB/E,aAAa,CAAC,YAAY,CAAC;AAC3D,EAAA,IAAIiF,MAAM,EAAE;AACRA,IAAAA,MAAM,CAACC,YAAY,CAAC,MAAM,EAAEF,IAAI,CAAC;AACrC,EAAA;AACJ;AAAC,SAAAG,oBAEmB;AAChB,EAAA,IAAM9H,KAAK,GAAG+H,gBAAgB,CAAC,IAAI,CAAC,CAC/BC,gBAAgB,CAAC,8BAA8B,CAAC,CAChDC,IAAI,EAAE;AACX,EAAA,IAAMC,MAAM,GAAG9E,MAAM,CAAC+E,UAAU,CAACnI,KAAK,CAAC;EAEvC,OAAOoD,MAAM,CAACgF,KAAK,CAACF,MAAM,CAAC,GAAG,CAAC,GAAGA,MAAM;AAC5C;AAAC,SAAAG,iBAEgB;AACb,EAAA,OAAOtB,MAAM,CAACuB,UAAU,GAAGxD,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC8B,iBAAgB,CAAC,CAAA9C,IAAA,CAAtB,IAAI,CAAoB;AACvD;AAAC,SAAA4B,iBAEgB;AACb,EAAA,IAAMY,GAAG,GAAG1C,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACuC,cAAa,CAAC,CAAAvD,IAAA,CAAnB,IAAI,CAAiB;EACjC,IAAMwD,QAAQ,GAAGhB,GAAG,KAAA,IAAA,IAAHA,GAAG,KAAA,MAAA,GAAA,MAAA,GAAHA,GAAG,CAAErE,YAAY,CAAC,WAAW,CAAC;EAC/C,IAAMsF,gBAAgB,GAAGD,QAAQ,KAAK,MAAM,IAAIA,QAAQ,KAAK,OAAO;AACpE,EAAA,IAAME,SAAS,GAAG5D,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACqC,cAAa,CAAC,CAAArD,IAAA,CAAnB,IAAI,CAAiB;AAEvCK,EAAAA,sBAAA,CAAKG,WAAW,EAAhB,IAAI,EAAeiD,gBAAgB,GAAGD,QAAQ,KAAK,MAAM,GAAGE,SAA7C,CAAC;EAChB5D,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC2C,eAAc,CAAC,CAAA3D,IAAA,CAApB,IAAI,CAAA;AACJF,EAAAA,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC4C,eAAc,CAAC,CAAA5D,IAAA,CAApB,IAAI,EAAiB,KAAK,EAAE,MAAM,CAAA;AACtC;AAAC,SAAAuD,iBAEgB;EACb,IAAI,CAACxE,sBAAA,CAAK0B,KAAK,EAAV,IAAS,CAAC,CAAC+B,GAAG,EAAE;AACjBzD,IAAAA,sBAAA,CAAK0B,KAAK,EAAV,IAAS,CAAC,CAAC+B,GAAG,GAAG,IAAI,CAAC7E,aAAa,CAAC,SAAS,CAAC;AAClD,EAAA;AAEA,EAAA,OAAOoB,sBAAA,CAAK0B,KAAK,EAAV,IAAS,CAAC,CAAC+B,GAAG;AACzB;AAAC,SAAAmB,kBAEiB;AACd,EAAA,IAAAE,wBAAA,GAAmB9E,sBAAA,CAAK0B,KAAK,EAAV,IAAS,CAAC;IAArB8B,MAAM,GAAAsB,wBAAA,CAANtB,MAAM;AACd,EAAA,IAAMC,GAAG,GAAG1C,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACuC,cAAa,CAAC,CAAAvD,IAAA,CAAnB,IAAI,CAAiB;AACjC,EAAA,IAAM8D,MAAM,GAAG/E,sBAAA,CAAKyB,WAAW,EAAhB,IAAe,CAAC;EAE/B,IAAI,CAACqC,YAAY,CAAC,eAAe,EAAEiB,MAAM,GAAG,MAAM,GAAG,OAAO,CAAC;AAE7D,EAAA,IAAItB,GAAG,EAAE;IACLA,GAAG,CAACK,YAAY,CAAC,WAAW,EAAEiB,MAAM,GAAG,MAAM,GAAG,OAAO,CAAC;AACxD,IAAA,IAAIA,MAAM,EAAE;AACRtB,MAAAA,GAAG,CAACuB,eAAe,CAAC,aAAa,CAAC;AACtC,IAAA,CAAC,MAAM;AACHvB,MAAAA,GAAG,CAACK,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;AAC3C,IAAA;AACJ,EAAA;AAEA,EAAA,IAAIN,MAAM,EAAE;IACRA,MAAM,CAACM,YAAY,CAAC,eAAe,EAAEmB,MAAM,CAACF,MAAM,CAAC,CAAC;IACpDvB,MAAM,CAACM,YAAY,CAAC,YAAY,EAAEiB,MAAM,GAAG,YAAY,GAAG,WAAW,CAAC;AACtE,IAAA,IAAMG,IAAI,GAAG1B,MAAM,CAAC5E,aAAa,CAAC,yBAAyB,CAAC;IAC5D,IAAIsG,IAAI,EAAEA,IAAI,CAAC1H,WAAW,GAAGuH,MAAM,GAAG,OAAO,GAAG,MAAM;AAC1D,EAAA;EAEAhE,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACgB,gBAAe,CAAC,CAAAhC,IAAA,CAArB,IAAI,CAAA;AACR;AAAC,SAAA4D,kBAEoD;AAAA,EAAA,IAArCM,WAAW,GAAAxK,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,IAAI;AAAA,EAAA,IAAEyK,MAAM,GAAAzK,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,MAAM;AAC/C,EAAA,IAAMoK,MAAM,GAAG/E,sBAAA,CAAKyB,WAAW,EAAhB,IAAe,CAAC;AAE/B,EAAA,IAAI,CAAC4D,aAAa,CAAC,IAAIC,WAAW,CAAC,gBAAgB,EAAE;AACjDC,IAAAA,MAAM,EAAE;AAAER,MAAAA,MAAM,EAANA,MAAM;AAAEK,MAAAA,MAAM,EAANA;KAAQ;AAC1BI,IAAAA,OAAO,EAAE,IAAI;AACbC,IAAAA,QAAQ,EAAE;AACd,GAAC,CAAC,CAAC;AAEH,EAAA,IAAIN,WAAW,EAAE;AACb,IAAA,IAAI,CAACE,aAAa,CAAC,IAAIC,WAAW,CAAC,mBAAmB,EAAE;AACpDC,MAAAA,MAAM,EAAE;AAAEH,QAAAA,MAAM,EAAE,MAAM;AAAEL,QAAAA,MAAM,EAANA;OAAQ;AAClCS,MAAAA,OAAO,EAAE,IAAI;AACbC,MAAAA,QAAQ,EAAE;AACd,KAAC,CAAC,CAAC;AACP,EAAA;AACJ;AAAC,SAAAC,YAAAA,CAEYX,MAAM,EAAqC;AAAA,EAAA,IAAnCY,SAAS,GAAAhL,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,IAAI;AAAA,EAAA,IAAEyK,MAAM,GAAAzK,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAAE,SAAA,GAAAF,SAAA,CAAA,CAAA,CAAA,GAAG,MAAM;EAClD,IAAIqF,sBAAA,CAAKyB,WAAW,EAAhB,IAAe,CAAC,KAAKsD,MAAM,EAAE;AAC7B,IAAA;AACJ,EAAA;AAEAzD,EAAAA,sBAAA,CAAKG,WAAW,EAAhB,IAAI,EAAesD,MAAJ,CAAC;EAChBhE,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC2C,eAAc,CAAC,CAAA3D,IAAA,CAApB,IAAI,CAAA;AAEJ,EAAA,IAAI0E,SAAS,EAAE;AACX5E,IAAAA,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC4C,eAAc,CAAC,CAAA5D,IAAA,CAApB,IAAI,EAAiB,IAAI,EAAEmE,MAAM,CAAA;AACrC,EAAA;AACJ;AAAC,SAAArC,wBAEuB;AAAA,EAAA,IAAA6C,MAAA,GAAA,IAAA;AACpB,EAAA,IAAAC,sBAAA,GAA6B7F,sBAAA,CAAK0B,KAAK,EAAV,IAAS,CAAC;IAA/B8B,MAAM,GAAAqC,sBAAA,CAANrC,MAAM;IAAEE,QAAQ,GAAAmC,sBAAA,CAARnC,QAAQ;AAExB,EAAA,IAAIF,MAAM,EAAE;AACR,IAAA,IAAI,CAAC9D,kBAAkB,CAAC8D,MAAM,EAAE,OAAO,EAAE,YAAA;MAAA,OAAMzC,iBAAA,CAAAkB,iBAAA,EAAA2D,MAAI,EAACE,WAAU,CAAC,CAAA7E,IAAA,CAAhB2E,MAAI,CAAA;AAAA,IAAA,CAAc,CAAC;AACtE,EAAA;AAEA,EAAA,IAAIlC,QAAQ,EAAE;AACV,IAAA,IAAI,CAAChE,kBAAkB,CAACgE,QAAQ,EAAE,OAAO,EAAE,YAAA;MAAA,OAAM3C,iBAAA,CAAAkB,iBAAA,EAAA2D,MAAI,EAACG,UAAS,CAAC,CAAA9E,IAAA,CAAf2E,MAAI,CAAA;AAAA,IAAA,CAAa,CAAC;AACvE,EAAA;EAEA,IAAI,CAAClG,kBAAkB,CAACvC,QAAQ,EAAE,SAAS,EAAE,UAACyC,KAAK,EAAK;AACpD,IAAA,IAAIA,KAAK,CAAC5D,GAAG,KAAK,QAAQ,IAAIgE,sBAAA,CAAKyB,WAAW,EAAhBmE,MAAe,CAAC,EAAE;MAC5C7E,iBAAA,CAAAkB,iBAAA,EAAA2D,MAAI,EAACG,UAAS,CAAC,CAAA9E,IAAA,CAAf2E,MAAI,CAAA;AACJpC,MAAAA,MAAM,aAANA,MAAM,KAAA,MAAA,IAANA,MAAM,CAAEwC,KAAK,EAAE;AACnB,IAAA,CAAC,MAAM,IAAIpG,KAAK,CAAC5D,GAAG,KAAK,KAAK,EAAE;AAC5B+E,MAAAA,iBAAA,CAAAkB,iBAAA,EAAA2D,MAAI,EAACK,aAAY,CAAC,CAAAhF,IAAA,CAAlB2E,MAAI,EAAehG,KAAK,CAAA;AAC5B,IAAA;AACJ,EAAA,CAAC,CAAC;AACN;AAAC,SAAAqG,aAAAA,CAEarG,KAAK,EAAE;AACjB;EACA,IAAI,CAACI,sBAAA,CAAKyB,WAAW,EAAhB,IAAe,CAAC,IAAIV,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACqC,cAAa,CAAC,CAAArD,IAAA,CAAnB,IAAI,CAAiB,EAAE;AAEhD,EAAA,IAAMiF,iBAAiB,GAAGnF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACkE,qBAAoB,CAAC,CAAAlF,IAAA,CAA1B,IAAI,CAAwB;AAEtD,EAAA,IAAIiF,iBAAiB,CAACtL,MAAM,KAAK,CAAC,EAAE;AAEpC,EAAA,IAAMwL,KAAK,GAAGF,iBAAiB,CAAC,CAAC,CAAC;EAClC,IAAMG,IAAI,GAAGH,iBAAiB,CAACA,iBAAiB,CAACtL,MAAM,GAAG,CAAC,CAAC;EAE5D,IAAM0L,YAAY,GAAG,IAAI,CAACjI,UAAU,CAACkI,aAAa,IAAIpJ,QAAQ,CAACoJ,aAAa;AAE5E,EAAA,IAAI3G,KAAK,CAAC4G,QAAQ,IAAIF,YAAY,KAAKF,KAAK,EAAE;IAC1CxG,KAAK,CAAC6G,cAAc,EAAE;IACtBJ,IAAI,CAACL,KAAK,EAAE;EAChB,CAAC,MAAM,IAAI,CAACpG,KAAK,CAAC4G,QAAQ,IAAIF,YAAY,KAAKD,IAAI,EAAE;IACjDzG,KAAK,CAAC6G,cAAc,EAAE;IACtBL,KAAK,CAACJ,KAAK,EAAE;AACjB,EAAA;AACJ;AAAC,SAAAG,wBAEuB;AACpB,EAAA,IAAMO,eAAe,GAAGpL,KAAK,CAACqL,IAAI,CAAC,IAAI,CAACtI,UAAU,CAACuI,gBAAgB,CAC/D,kEACJ,CAAC,CAAC;AACF,EAAA,IAAMC,cAAc,GAAGvL,KAAK,CAACqL,IAAI,CAAC,IAAI,CAACC,gBAAgB,CACnD,kEACJ,CAAC,CAAC;AACF,EAAA,OAAA,EAAA,CAAAnL,MAAA,CAAWiL,eAAe,EAAKG,cAAc,CAAA;AACjD;AAAC,SAAA5D,mBAEkB;EACf,IAAM6D,WAAW,GAAG9G,sBAAA,CAAKyB,WAAW,EAAhB,IAAe,CAAC,IAAI,CAACV,iBAAA,CAAAkB,iBAAA,MAAI,EAACqC,cAAa,CAAC,CAAArD,IAAA,CAAnB,IAAI,CAAiB;EAE9DF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC8E,cAAa,CAAC,CAAA9F,IAAA,CAAnB,IAAI,EAAgB6F,WAAW,CAAA;EAC/B/F,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC+E,cAAa,CAAC,CAAA/F,IAAA,CAAnB,IAAI,EAAgB6F,WAAW,CAAA;EAE/B,IAAIA,WAAW,IAAI,CAAC9G,sBAAA,CAAK4B,aAAa,EAAlB,IAAiB,CAAC,EAAE;IACpCb,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACgF,iBAAgB,CAAC,CAAAhG,IAAA,CAAtB,IAAI,CAAA;IACJF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACiF,kBAAiB,CAAC,CAAAjG,IAAA,CAAvB,IAAI,CAAA;EACR,CAAC,MAAM,IAAI,CAAC6F,WAAW,IAAI9G,sBAAA,CAAK4B,aAAa,EAAlB,IAAiB,CAAC,EAAE;IAC3Cb,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACkF,aAAY,CAAC,CAAAlG,IAAA,CAAlB,IAAI,CAAA;AACR,EAAA;AAEAK,EAAAA,sBAAA,CAAKM,aAAa,EAAlB,IAAI,EAAiBkF,WAAJ,CAAC;AACtB;AAAC,SAAAG,oBAEmB;EAChB,IAAMV,aAAa,GAAG,IAAI,CAAClI,UAAU,CAACkI,aAAa,IAAIpJ,QAAQ,CAACoJ,aAAa;AAC7EjF,EAAAA,sBAAA,CAAKK,mBAAmB,EAAxB,IAAI,EAAuB4E,aAAa,YAAYzL,WAAW,GAAGyL,aAAa,GAAG,IAA3D,CAAC;AAC5B;AAAC,SAAAW,qBAEoB;AACjB,EAAA,IAAAE,sBAAA,GAAmBpH,sBAAA,CAAK0B,KAAK,EAAV,IAAS,CAAC;IAArB8B,MAAM,GAAA4D,sBAAA,CAAN5D,MAAM;AACd,EAAA,IAAM0C,iBAAiB,GAAGnF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACkE,qBAAoB,CAAC,CAAAlF,IAAA,CAA1B,IAAI,CAAwB;AACtD,EAAA,IAAMoG,WAAW,GAAGnB,iBAAiB,CAACoB,IAAI,CAAC,UAACC,OAAO,EAAA;IAAA,OAAKA,OAAO,KAAK/D,MAAM;AAAA,EAAA,CAAA,CAAC,IACpE0C,iBAAiB,CAAC,CAAC,CAAC;AAC3BmB,EAAAA,WAAW,aAAXA,WAAW,KAAA,MAAA,IAAXA,WAAW,CAAErB,KAAK,EAAE;AACxB;AAAC,SAAAmB,gBAEe;AACZ,EAAA,IAAAK,sBAAA,GAAmBxH,sBAAA,CAAK0B,KAAK,EAAV,IAAS,CAAC;IAArB8B,MAAM,GAAAgE,sBAAA,CAANhE,MAAM;AACd,EAAA,IAAMiE,YAAY,GAAGzH,sBAAA,CAAK2B,mBAAmB,EAAxB,IAAuB,CAAC,IACtCxE,QAAQ,CAACuK,QAAQ,CAAC1H,sBAAA,CAAK2B,mBAAmB,EAAxB,IAAuB,CAAC,CAAC;EAClD,IAAM0F,WAAW,GAAGI,YAAY,GAAGzH,sBAAA,CAAK2B,mBAAmB,EAAxB,IAAuB,CAAC,GAAG6B,MAAM;AAEpE6D,EAAAA,WAAW,aAAXA,WAAW,KAAA,MAAA,IAAXA,WAAW,CAAErB,KAAK,EAAE;AACpB1E,EAAAA,sBAAA,CAAKK,mBAAmB,EAAxB,IAAI,EAAuB,IAAJ,CAAC;AAC5B;AAAC,SAAAgG,mBAEkB;AAAA,EAAA,IAAAC,MAAA,GAAA,IAAA;EACf,IAAMC,MAAM,GAAG,IAAI,CAACC,aAAa,IAAI3K,QAAQ,CAACkF,IAAI;AAClD,EAAA,OAAO/G,KAAK,CAACqL,IAAI,CAACkB,MAAM,CAACE,QAAQ,CAAC,CAACvH,MAAM,CAAC,UAACwH,KAAK,EAAA;IAAA,OAAKA,KAAK,KAAKJ,MAAI;EAAA,CAAA,CAAC;AACxE;AAAC,SAAAb,cAAAA,CAEckB,WAAW,EAAE;AAAA,EAAA,IAAAC,MAAA,GAAA,IAAA;AACxB,EAAA,IAAID,WAAW,IAAIjI,sBAAA,CAAK6B,aAAa,EAAlB,IAAiB,CAAC,CAACsG,IAAI,KAAK,CAAC,EAAE;AAC9CpH,IAAAA,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC0F,gBAAe,CAAC,CAAA1G,IAAA,CAArB,IAAI,CAAA,CAAoB1C,OAAO,CAAC,UAACgJ,OAAO,EAAK;AACzCvH,MAAAA,sBAAA,CAAK6B,aAAa,EAAlBqG,MAAiB,CAAC,CAAC7L,GAAG,CAACkL,OAAO,EAAEA,OAAO,CAACnI,YAAY,CAAC,aAAa,CAAC,CAAC;AACxE,IAAA,CAAC,CAAC;AACN,EAAA;AAEAY,EAAAA,sBAAA,CAAK6B,aAAa,EAAlB,IAAiB,CAAC,CAACtD,OAAO,CAAC,UAAC6J,kBAAkB,EAAEb,OAAO,EAAK;IACxD,IAAM5H,MAAM,GAAG4H,OAAO;AACtB,IAAA,IAAIU,WAAW,EAAE;AACbtI,MAAAA,MAAM,CAACmE,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC;MAC1CnE,MAAM,CAAC0I,KAAK,GAAG,IAAI;AACnB1I,MAAAA,MAAM,CAACmE,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;AACpC,IAAA,CAAC,MAAM;MACH,IAAIsE,kBAAkB,KAAK,IAAI,EAAE;AAC7BzI,QAAAA,MAAM,CAACqF,eAAe,CAAC,aAAa,CAAC;AACzC,MAAA,CAAC,MAAM;AACHrF,QAAAA,MAAM,CAACmE,YAAY,CAAC,aAAa,EAAEsE,kBAAkB,CAAC;AAC1D,MAAA;MACAzI,MAAM,CAAC0I,KAAK,GAAG,KAAK;AACpB1I,MAAAA,MAAM,CAACqF,eAAe,CAAC,OAAO,CAAC;AACnC,IAAA;AACJ,EAAA,CAAC,CAAC;EAEF,IAAI,CAACiD,WAAW,EAAE;IACdjI,sBAAA,CAAK6B,aAAa,EAAlB,IAAiB,CAAC,CAACyG,KAAK,EAAE;AAC9B,EAAA;AACJ;AAAC,SAAAtB,cAAAA,CAEcuB,UAAU,EAAE;AACvB,EAAA,IAAIA,UAAU,EAAE;AACZ,IAAA,IAAIvI,sBAAA,CAAK+B,eAAe,EAApB,IAAmB,CAAC,EAAE;AAC1BT,IAAAA,sBAAA,CAAKQ,YAAY,EAAjB,IAAI,EAAgB;AAChBQ,MAAAA,IAAI,EAAEnF,QAAQ,CAACqL,eAAe,CAACC,KAAK,CAACC,QAAQ;AAC7CrG,MAAAA,IAAI,EAAElF,QAAQ,CAACkF,IAAI,CAACoG,KAAK,CAACC;AAC9B,KAHgB,CAAC;AAIjBvL,IAAAA,QAAQ,CAACqL,eAAe,CAACC,KAAK,CAACC,QAAQ,GAAG,QAAQ;AAClDvL,IAAAA,QAAQ,CAACkF,IAAI,CAACoG,KAAK,CAACC,QAAQ,GAAG,QAAQ;AACvCpH,IAAAA,sBAAA,CAAKS,eAAe,EAApB,IAAI,EAAmB,IAAJ,CAAC;AACpB,IAAA;AACJ,EAAA;AAEA,EAAA,IAAI,CAAC/B,sBAAA,CAAK+B,eAAe,EAApB,IAAmB,CAAC,EAAE;AAC3B5E,EAAAA,QAAQ,CAACqL,eAAe,CAACC,KAAK,CAACC,QAAQ,GAAG1I,sBAAA,CAAK8B,YAAY,EAAjB,IAAgB,CAAC,CAACQ,IAAI;AAChEnF,EAAAA,QAAQ,CAACkF,IAAI,CAACoG,KAAK,CAACC,QAAQ,GAAG1I,sBAAA,CAAK8B,YAAY,EAAjB,IAAgB,CAAC,CAACO,IAAI;AACrDf,EAAAA,sBAAA,CAAKQ,YAAY,EAAjB,IAAI,EAAgB;AAAEO,IAAAA,IAAI,EAAE,EAAE;AAAEC,IAAAA,IAAI,EAAE;AAAG,GAAzB,CAAC;AACjBhB,EAAAA,sBAAA,CAAKS,eAAe,EAApB,IAAI,EAAmB,KAAJ,CAAC;AACxB;AAAC,SAAAe,qBAEoB;AAAA,EAAA,IAAA6F,MAAA,GAAA,IAAA;EACjB,IAAIC,MAAM,GAAG,CAAC;EACd,IAAIC,MAAM,GAAG,CAAC;EACd,IAAMC,eAAe,GAAG,EAAE;AAC1B,EAAA,IAAMC,SAAS,GAAG,EAAE,CAAC;;EAErB,IAAI,CAACrJ,kBAAkB,CAACvC,QAAQ,EAAE,YAAY,EAAE,UAAC6L,CAAC,EAAK;AACnD,IAAA,IAAIA,CAAC,CAACC,OAAO,CAACrO,MAAM,GAAG,CAAC,EAAE;IAC1BgO,MAAM,GAAGI,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO;IAC7BL,MAAM,GAAGG,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAACE,OAAO;AACjC,EAAA,CAAC,EAAE;AAAEC,IAAAA,OAAO,EAAE;AAAK,GAAC,CAAC;EAErB,IAAI,CAAC1J,kBAAkB,CAACvC,QAAQ,EAAE,UAAU,EAAE,UAAC6L,CAAC,EAAK;AACjD,IAAA,IAAIA,CAAC,CAACK,cAAc,CAACzO,MAAM,GAAG,CAAC,EAAE;IACjC,IAAM0O,MAAM,GAAGN,CAAC,CAACK,cAAc,CAAC,CAAC,CAAC,CAACH,OAAO,GAAGN,MAAM;IACnD,IAAMW,MAAM,GAAGP,CAAC,CAACK,cAAc,CAAC,CAAC,CAAC,CAACF,OAAO,GAAGN,MAAM;;AAEnD;AACA,IAAA,IAAIW,IAAI,CAACC,GAAG,CAACF,MAAM,CAAC,GAAGC,IAAI,CAACC,GAAG,CAACH,MAAM,CAAC,EAAE;AAEzC,IAAA,IAAMI,UAAU,GAAGd,MAAM,GAAGG,SAAS;;AAErC;AACA,IAAA,IAAIW,UAAU,IAAIJ,MAAM,GAAGR,eAAe,IAAI,CAAC9I,sBAAA,CAAKyB,WAAW,EAAhBkH,MAAe,CAAC,EAAE;MAC7D5H,iBAAA,CAAAkB,iBAAA,EAAA0G,MAAI,EAACgB,SAAQ,CAAC,CAAA1I,IAAA,CAAd0H,MAAI,CAAA;AACR,IAAA,CAAC,MAAM,IAAIW,MAAM,GAAG,CAACR,eAAe,IAAI9I,sBAAA,CAAKyB,WAAW,EAAhBkH,MAAe,CAAC,EAAE;AACtD;MACA5H,iBAAA,CAAAkB,iBAAA,EAAA0G,MAAI,EAAC5C,UAAS,CAAC,CAAA9E,IAAA,CAAf0H,MAAI,CAAA;AACR,IAAA;AACJ,EAAA,CAAC,EAAE;AAAES,IAAAA,OAAO,EAAE;AAAK,GAAC,CAAC;AACzB;AAAC,SAAAtD,cAEa;AACV/E,EAAAA,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACyD,YAAW,CAAC,CAAAzE,IAAA,CAAjB,IAAI,EAAc,CAACjB,sBAAA,CAAKyB,WAAW,EAAhB,IAAe,CAAC,CAAA;AACvC;AAAC,SAAAkI,YAEW;EACR5I,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACyD,YAAW,CAAC,CAAAzE,IAAA,CAAjB,IAAI,EAAc,IAAI,CAAA;AAC1B;AAAC,SAAA8E,aAEY;EACThF,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACyD,YAAW,CAAC,CAAAzE,IAAA,CAAjB,IAAI,EAAc,KAAK,CAAA;AAC3B;AAAC,SAAA2I,gBAEe;AACZ;AACA;AACA7I,EAAAA,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAACyD,YAAW,CAAC,CAAAzE,IAAA,CAAjB,IAAI,EAAc,KAAK,EAAE,KAAK,CAAA;AAClC;AAAC,SAAA4I,iBAEgB;AACb;AACA,EAAA,OAAO1M,QAAQ,CAACyB,aAAa,CAAC,4BAA4B,CAAC,KAAK,IAAI;AACxE;AAcC,SAAAwE,uBAEsB;EACnB,IAAIpD,sBAAA,CAAKgC,iBAAiB,EAAtB,IAAqB,CAAC,KAAK,IAAI,EAAE;AACjCnB,IAAAA,YAAY,CAACb,sBAAA,CAAKgC,iBAAiB,EAAtB,IAAqB,CAAC,CAAC;AACpCV,IAAAA,sBAAA,CAAKU,iBAAiB,EAAtB,IAAI,EAAqB,IAAJ,CAAC;AAC1B,EAAA;AACJ;AAAC,SAAAkB,wBAEuB;AAAA,EAAA,IAAA4G,MAAA,GAAA,IAAA;AACpB;AACA,EAAA,IAAI,CAAC/I,iBAAA,CAAAkB,iBAAA,EAAA,IAAI,EAAC4H,cAAa,CAAC,CAAA5I,IAAA,CAAnB,IAAI,CAAiB,EAAE;AACxB,IAAA;AACJ,EAAA;AAEA,EAAA,IAAM8I,oBAAoB,GAAG,SAAvBA,oBAAoBA,GAAS;AAC/B;AACA,IAAA,IAAI/J,sBAAA,CAAKyB,WAAW,EAAhBqI,MAAe,CAAC,IAAI9J,sBAAA,CAAKgC,iBAAiB,EAAtB8H,MAAqB,CAAC,KAAK,IAAI,EAAE;AACrDxI,MAAAA,sBAAA,CAAKU,iBAAiB,EAAtB8H,MAAI,EAAqBnJ,UAAU,CAAC,YAAM;AACtC,QAAA,IAAIX,sBAAA,CAAKyB,WAAW,EAAhBqI,MAAe,CAAC,EAAE;UAClB/I,iBAAA,CAAAkB,iBAAA,EAAA6H,MAAI,EAACF,aAAY,CAAC,CAAA3I,IAAA,CAAlB6I,MAAI,CAAA;AACR,QAAA;AACAxI,QAAAA,sBAAA,CAAKU,iBAAiB,EAAtB8H,MAAI,EAAqB,IAAJ,CAAC;MAC1B,CAAC,EAAEvI,uBAAuB,CALL,CAAC;AAM1B,IAAA;EACJ,CAAC;;AAED;EACA,IAAI,CAAC7B,kBAAkB,CAACvC,QAAQ,EAAE,6BAA6B,EAAE4M,oBAAoB,CAAC;;AAEtF;EACA,IAAI,CAACrK,kBAAkB,CAACvC,QAAQ,EAAE,sBAAsB,EAAE4M,oBAAoB,CAAC;AACnF;AAACC,eAAA,CAjaC9H,UAAU,EAAA,QAAA,EACIjF,MAAM,CAAA;AAAA+M,eAAA,CADpB9H,UAAU,EAAA,UAAA,EAGM,oBAAoB,CAAA;AAia1C+H,cAAc,CAACC,MAAM,CAAC,aAAa,EAAEhI,UAAU,CAAC;;;;"}