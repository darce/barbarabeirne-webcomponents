{"version":3,"file":"gallery-intro-toggle.js","sources":["../../../src/components/base/base-component.js","../../../src/components/gallery-intro-toggle/gallery-intro-toggle.js"],"sourcesContent":["/**\n * Module-level state store using WeakMaps for automatic garbage collection.\n * Private to this module - components access state via class methods.\n */\nconst stateMap = new WeakMap();\nconst refsMap = new WeakMap();\n\n/**\n * BaseComponent mixin - provides common functionality for web components.\n *\n * Public API (for subclasses):\n *   State:      initComponent, getComponentState, setComponentState,\n *                getComponentRefs, setComponentRefs\n *   Styles:     initStyles (reads static styles/stylesId)\n *   DOM:        initShadow, initLightDOM, queryRefs, queryLightRefs\n *   Attributes: getNumberAttr, getBooleanAttr, getStringAttr\n *   Events:     addManagedListener\n *   Timers:     setManagedInterval, clearManagedInterval, setManagedTimeout, clearManagedTimeout\n *   Cleanup:    cleanup (call in disconnectedCallback)\n */\nconst BaseComponent = (Base = HTMLElement) => class extends Base {\n    // Private fields\n    #listeners = [];\n\n    #timers = { intervals: [], timeouts: [] };\n\n    // ─────────────────────────────────────────────────────────────\n    // State Management (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    initComponent(state = {}, refs = {}) {\n        stateMap.set(this, state);\n        refsMap.set(this, refs);\n    }\n\n    getComponentState() {\n        return stateMap.get(this);\n    }\n\n    setComponentState(updates = {}) {\n        const state = stateMap.get(this);\n        if (!state) return;\n        Object.assign(state, updates);\n    }\n\n    getComponentRefs() {\n        return refsMap.get(this);\n    }\n\n    setComponentRefs(refs = {}) {\n        refsMap.set(this, refs);\n    }\n\n    #destroyComponent() {\n        stateMap.delete(this);\n        refsMap.delete(this);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Styles (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    /**\n     * Inject component styles into document head.\n     * Reads styles from static `styles` and `stylesId` properties.\n     * Only injects once per unique ID.\n     */\n    initStyles() {\n        const { styles, stylesId } = this.constructor;\n        if (!styles || !stylesId) return;\n        if (document.getElementById(stylesId)) return;\n        const styleEl = document.createElement('style');\n        styleEl.id = stylesId;\n        styleEl.textContent = styles;\n        document.head.appendChild(styleEl);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // DOM Initialization (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    initShadow(template, mode = 'open') {\n        const shadow = this.attachShadow({ mode });\n        shadow.appendChild(template.content.cloneNode(true));\n        return shadow;\n    }\n\n    initLightDOM(template) {\n        this.appendChild(template.content.cloneNode(true));\n    }\n\n    queryRefs(selectors = {}) {\n        const shadow = this.shadowRoot;\n        if (!shadow) return {};\n\n        const refs = {};\n        Object.entries(selectors).forEach(([key, selector]) => {\n            refs[key] = shadow.querySelector(selector);\n        });\n        return refs;\n    }\n\n    queryLightRefs(selectors = {}) {\n        const refs = {};\n        Object.entries(selectors).forEach(([key, selector]) => {\n            refs[key] = this.querySelector(selector);\n        });\n        return refs;\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Attribute Helpers (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    getNumberAttr(name, defaultValue = 0) {\n        const value = this.getAttribute(name);\n        return value !== null ? Number(value) : defaultValue;\n    }\n\n    getBooleanAttr(name) {\n        return this.hasAttribute(name);\n    }\n\n    getStringAttr(name, defaultValue = '') {\n        return this.getAttribute(name) ?? defaultValue;\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Event Listener Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    addManagedListener(target, event, handler, options) {\n        target.addEventListener(event, handler, options);\n        this.#listeners.push({\n            target,\n            event,\n            handler,\n            options,\n        });\n    }\n\n    #removeAllListeners() {\n        this.#listeners.forEach(({\n            target,\n            event,\n            handler,\n            options,\n        }) => {\n            target.removeEventListener(event, handler, options);\n        });\n        this.#listeners = [];\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Timer Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    setManagedInterval(callback, delay) {\n        const id = setInterval(callback, delay);\n        this.#timers.intervals.push(id);\n        return id;\n    }\n\n    clearManagedInterval(id) {\n        clearInterval(id);\n        this.#timers.intervals = this.#timers.intervals.filter((i) => i !== id);\n    }\n\n    setManagedTimeout(callback, delay) {\n        const id = setTimeout(callback, delay);\n        this.#timers.timeouts.push(id);\n        return id;\n    }\n\n    clearManagedTimeout(id) {\n        clearTimeout(id);\n        this.#timers.timeouts = this.#timers.timeouts.filter((i) => i !== id);\n    }\n\n    #clearAllTimers() {\n        this.#timers.intervals.forEach((id) => clearInterval(id));\n        this.#timers.timeouts.forEach((id) => clearTimeout(id));\n        this.#timers = { intervals: [], timeouts: [] };\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Cleanup (Public API - call in disconnectedCallback)\n    // ─────────────────────────────────────────────────────────────\n\n    cleanup() {\n        this.#removeAllListeners();\n        this.#clearAllTimers();\n        this.#destroyComponent();\n    }\n};\n\nexport default BaseComponent;\n","import BaseComponent from '../base/base-component';\n// CSS is pre-compiled by build:css to lib/components/gallery-intro-toggle/gallery-intro-toggle.css\nimport styles from '../../../lib/components/gallery-intro-toggle/gallery-intro-toggle.css';\n\n/**\n * Gallery intro toggle button.\n * Standard pattern: placed inside a gallery header within <main data-gallery-context>,\n * controls .gallery-intro inside the same gallery context.\n *\n * Visibility is controlled by the gallery intro open state.\n */\nclass GalleryIntroToggle extends BaseComponent(HTMLElement) {\n    static styles = styles;\n\n    static stylesId = 'gallery-intro-toggle-styles';\n\n    // Private state\n    #state = {\n        isOpen: false,\n        galleryContainer: null,\n    };\n\n    // Lifecycle methods\n    connectedCallback() {\n        this.initStyles();\n        this.#initButton();\n        this.#attachEventListeners();\n    }\n\n    disconnectedCallback() {\n        this.cleanup();\n    }\n\n    // Private methods\n    #initButton() {\n        // Standard pattern: toggle in <main data-gallery-context>, gallery in the same context\n        const galleryContainer = document.querySelector('[data-gallery-context]');\n        const introSection = galleryContainer?.querySelector('.gallery-intro');\n        const isOpen = Boolean(galleryContainer?.classList.contains('is-intro-open'));\n\n        this.#state.galleryContainer = galleryContainer;\n        this.#state.isOpen = isOpen;\n\n        if (introSection) {\n            introSection.setAttribute('aria-hidden', String(!isOpen));\n        }\n\n        this.setAttribute('role', 'button');\n        this.setAttribute('tabindex', '0');\n        this.setAttribute('aria-expanded', String(isOpen));\n        this.textContent = isOpen ? 'Close' : 'Intro';\n    }\n\n    #attachEventListeners() {\n        this.addManagedListener(this, 'click', () => this.#toggle());\n        this.addManagedListener(this, 'keydown', (event) => {\n            if (event.key === 'Enter' || event.key === ' ') {\n                event.preventDefault();\n                this.#toggle();\n            }\n        });\n    }\n\n    #setOpen(isOpen) {\n        if (this.#state.isOpen === isOpen) return;\n\n        const { galleryContainer } = this.#state;\n        const introSection = galleryContainer?.querySelector('.gallery-intro');\n        this.#state.isOpen = isOpen;\n\n        if (isOpen && introSection) {\n            introSection.setAttribute('aria-hidden', 'false');\n        }\n\n        galleryContainer?.classList.toggle('is-intro-open', isOpen);\n        this.setAttribute('aria-expanded', String(isOpen));\n        this.textContent = isOpen ? 'Close' : 'Intro';\n\n        if (!isOpen && introSection) {\n            introSection.setAttribute('aria-hidden', 'true');\n        }\n    }\n\n    #toggle() {\n        this.#setOpen(!this.#state.isOpen);\n    }\n}\n\ncustomElements.define('gallery-intro-toggle', GalleryIntroToggle);\n\nexport default GalleryIntroToggle;\n"],"names":["stateMap","WeakMap","refsMap","BaseComponent","_listeners","_timers","_Class_brand","Base","arguments","length","undefined","HTMLElement","WeakSet","_Base","_class","_this","_classCallCheck","_len","args","Array","_key","_callSuper","concat","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","intervals","timeouts","_inherits","_createClass","key","value","initComponent","state","refs","set","getComponentState","get","setComponentState","updates","Object","assign","getComponentRefs","setComponentRefs","initStyles","_this$constructor","constructor","styles","stylesId","document","getElementById","styleEl","createElement","id","textContent","head","appendChild","initShadow","template","mode","shadow","attachShadow","content","cloneNode","initLightDOM","queryRefs","selectors","shadowRoot","entries","forEach","_ref","_ref2","_slicedToArray","selector","querySelector","queryLightRefs","_this2","_ref3","_ref4","getNumberAttr","name","defaultValue","getAttribute","Number","getBooleanAttr","hasAttribute","getStringAttr","_this$getAttribute","addManagedListener","target","event","handler","options","addEventListener","_classPrivateFieldGet","push","setManagedInterval","callback","delay","setInterval","clearManagedInterval","clearInterval","filter","i","setManagedTimeout","setTimeout","clearManagedTimeout","clearTimeout","cleanup","_assertClassBrand","_removeAllListeners","call","_clearAllTimers","_destroyComponent","_ref5","removeEventListener","_classPrivateFieldSet","_state","_GalleryIntroToggle_brand","GalleryIntroToggle","_BaseComponent","isOpen","galleryContainer","connectedCallback","_initButton","_attachEventListeners","disconnectedCallback","introSection","Boolean","classList","contains","setAttribute","String","_toggle","preventDefault","_setOpen","_classPrivateFieldGet2","toggle","_defineProperty","customElements","define"],"mappings":"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"}