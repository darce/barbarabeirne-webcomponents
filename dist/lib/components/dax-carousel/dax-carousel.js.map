{"version":3,"file":"dax-carousel.js","sources":["../../../../src/components/base/base-component.js","../../../../src/components/dax-carousel/dax-carousel.js"],"sourcesContent":["/**\n * BaseComponent mixin - provides common functionality for web components.\n *\n * Public API (for subclasses):\n *   Styles:     initStyles (reads static styles/stylesId)\n *   DOM:        initShadow\n *   Attributes: getNumberAttr, getBooleanAttr\n *   Events:     addManagedListener\n *   Timers:     setManagedInterval, clearManagedInterval, setManagedTimeout, clearManagedTimeout\n *   Cleanup:    cleanup (call in disconnectedCallback)\n */\nconst BaseComponent = (Base = HTMLElement) => class extends Base {\n    // Private fields\n    #listeners = [];\n\n    #timers = { intervals: [], timeouts: [] };\n\n    // ─────────────────────────────────────────────────────────────\n    // Styles (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    /**\n     * Inject component styles into document head.\n     * Reads styles from static `styles` and `stylesId` properties.\n     * Only injects once per unique ID.\n     */\n    initStyles() {\n        const { styles, stylesId } = this.constructor;\n        if (!styles || !stylesId) return;\n        if (document.getElementById(stylesId)) return;\n        const styleEl = document.createElement('style');\n        styleEl.id = stylesId;\n        styleEl.textContent = styles;\n        document.head.appendChild(styleEl);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // DOM Initialization (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    initShadow(template, mode = 'open') {\n        const shadow = this.attachShadow({ mode });\n        shadow.appendChild(template.content.cloneNode(true));\n        return shadow;\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Attribute Helpers (Public API)\n    // ─────────────────────────────────────────────────────────────\n\n    getNumberAttr(name, defaultValue = 0) {\n        const value = this.getAttribute(name);\n        return value !== null ? Number(value) : defaultValue;\n    }\n\n    getBooleanAttr(name) {\n        return this.hasAttribute(name);\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Event Listener Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    addManagedListener(target, event, handler, options) {\n        target.addEventListener(event, handler, options);\n        this.#listeners.push({\n            target,\n            event,\n            handler,\n            options,\n        });\n    }\n\n    #removeAllListeners() {\n        this.#listeners.forEach(({\n            target,\n            event,\n            handler,\n            options,\n        }) => {\n            target.removeEventListener(event, handler, options);\n        });\n        this.#listeners = [];\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Timer Management (Public API + Private cleanup)\n    // ─────────────────────────────────────────────────────────────\n\n    setManagedInterval(callback, delay) {\n        const id = setInterval(callback, delay);\n        this.#timers.intervals.push(id);\n        return id;\n    }\n\n    clearManagedInterval(id) {\n        clearInterval(id);\n        this.#timers.intervals = this.#timers.intervals.filter((i) => i !== id);\n    }\n\n    setManagedTimeout(callback, delay) {\n        const id = setTimeout(callback, delay);\n        this.#timers.timeouts.push(id);\n        return id;\n    }\n\n    clearManagedTimeout(id) {\n        clearTimeout(id);\n        this.#timers.timeouts = this.#timers.timeouts.filter((i) => i !== id);\n    }\n\n    #clearAllTimers() {\n        this.#timers.intervals.forEach((id) => clearInterval(id));\n        this.#timers.timeouts.forEach((id) => clearTimeout(id));\n        this.#timers = { intervals: [], timeouts: [] };\n    }\n\n    // ─────────────────────────────────────────────────────────────\n    // Cleanup (Public API - call in disconnectedCallback)\n    // ─────────────────────────────────────────────────────────────\n\n    cleanup() {\n        this.#removeAllListeners();\n        this.#clearAllTimers();\n    }\n};\n\nexport default BaseComponent;\n","import BaseComponent from '../base/base-component';\n// CSS is pre-compiled by build:css to .build/css/dax-carousel/dax-carousel.css\nimport styles from '../../../.build/css/dax-carousel/dax-carousel.css';\n\nconst DEFAULT_INTERVAL = 4000;\nconst CONTROLS_FADE_INTERVAL = 2500;\nconst CAPTION_AUTO_HIDE_DELAY_MS = 5000;\n\n// Swipe detection thresholds\nconst SWIPE_THRESHOLD_PX = 50; // Minimum distance for a swipe\nconst SWIPE_MAX_TIME_MS = 300; // Maximum time for a swipe gesture\nconst MOBILE_BREAKPOINT_PX = 810; // Match $breakpoint-nav\n\nconst CONTROLS_TEMPLATE = `\n    <nav class=\"dax-carousel-controls\" aria-label=\"Slideshow controls\">\n        <span class=\"dax-control dax-control--counter dax-image-counter\" aria-live=\"polite\"></span>\n        <button class=\"dax-control dax-control--button dax-prev\" type=\"button\" aria-label=\"Previous slide\">\n            <span class=\"material-symbols-sharp\">skip_previous</span>\n        </button>\n        <button class=\"dax-control dax-control--button dax-play-pause\" type=\"button\" aria-label=\"Stop slideshow\">\n            <span class=\"material-symbols-sharp\">stop</span>\n        </button>\n        <button class=\"dax-control dax-control--button dax-next\" type=\"button\" aria-label=\"Next slide\">\n            <span class=\"material-symbols-sharp\">skip_next</span>\n        </button>\n    </nav>\n`;\n\nconst CAPTION_CLOSE_TEMPLATE = `\n    <button class=\"dax-caption-close\" type=\"button\" aria-label=\"Hide caption\">\n        <span class=\"material-symbols-sharp\">close</span>\n    </button>\n`;\n\nconst CAPTION_TOGGLE_TEMPLATE = `\n    <button class=\"dax-caption-toggle dax-control dax-control--button\" type=\"button\" aria-label=\"Show caption\">\n        <span class=\"material-symbols-sharp\">info</span>\n    </button>\n`;\n\nconst REF_SELECTORS = {\n    prevButton: '.dax-prev',\n    nextButton: '.dax-next',\n    playPauseButton: '.dax-play-pause',\n    imageCounter: '.dax-image-counter',\n    captionToggleButton: '.dax-caption-toggle',\n};\n\nclass DaxCarousel extends BaseComponent(HTMLElement) {\n    static observedAttributes = ['interval'];\n\n    static styles = styles;\n\n    static stylesId = 'dax-carousel-styles';\n\n    // Private state\n    #state = {\n        intervalMs: DEFAULT_INTERVAL,\n        autoplay: true,\n        fullscreen: false,\n        noControls: false,\n        currentIndex: 0,\n        timer: null,\n        controlsTimer: null,\n        controlsVisible: false,\n        wheelLock: false,\n        slides: [],\n        isCaptionOpen: true,\n        captionToggleTimer: null,\n        // Swipe tracking\n        touchStartX: 0,\n        touchStartY: 0,\n        touchStartTime: 0,\n    };\n\n    #refs = {};\n\n    connectedCallback() {\n        // Read attributes here (not constructor) per custom-elements spec\n        this.#state.intervalMs = this.getNumberAttr('interval', DEFAULT_INTERVAL);\n        this.#state.autoplay = this.getBooleanAttr('autoplay');\n        this.#state.fullscreen = this.hasAttribute('fullscreen');\n        this.#state.noControls = this.hasAttribute('no-controls');\n\n        this.initStyles();\n        if (this.#state.fullscreen) {\n            this.classList.add('fullscreen');\n        }\n        if (this.#state.noControls) {\n            this.classList.add('no-controls');\n        }\n        this.#initControls();\n        this.#initCaptionToggle();\n        this.#refreshSlides();\n        this.#attachEventListeners();\n        if (this.#state.autoplay) {\n            this.#start(true); // isInitial = true, don't dispatch event\n        }\n        this.#updatePlayPauseLabel();\n    }\n\n    disconnectedCallback() {\n        this.cleanup();\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (oldValue === newValue) return;\n        this.#handleAttributeChange(name, newValue);\n    }\n\n    // Private methods\n    #initControls() {\n        const template = document.createElement('template');\n        template.innerHTML = CONTROLS_TEMPLATE;\n        this.appendChild(template.content.cloneNode(true));\n\n        this.#refs = {\n            prevButton: this.querySelector(REF_SELECTORS.prevButton),\n            nextButton: this.querySelector(REF_SELECTORS.nextButton),\n            playPauseButton: this.querySelector(REF_SELECTORS.playPauseButton),\n            imageCounter: this.querySelector(REF_SELECTORS.imageCounter),\n        };\n    }\n\n    #initCaptionToggle() {\n        // Inject close button into each figcaption and bind listener immediately\n        const figcaptions = this.querySelectorAll('figcaption');\n        figcaptions.forEach((figcaption) => {\n            const closeTemplate = document.createElement('template');\n            closeTemplate.innerHTML = CAPTION_CLOSE_TEMPLATE;\n            const closeBtn = closeTemplate.content.firstElementChild;\n            this.addManagedListener(closeBtn, 'click', (e) => {\n                e.stopPropagation();\n                this.#setCaptionOpen(false);\n            });\n            figcaption.insertBefore(closeBtn, figcaption.firstChild);\n        });\n\n        // Add info toggle button to carousel (positioned same as controls)\n        const toggleTemplate = document.createElement('template');\n        toggleTemplate.innerHTML = CAPTION_TOGGLE_TEMPLATE;\n        this.appendChild(toggleTemplate.content.cloneNode(true));\n\n        this.#refs.captionToggleButton = this.querySelector(REF_SELECTORS.captionToggleButton);\n\n        if (this.#refs.captionToggleButton) {\n            this.addManagedListener(this.#refs.captionToggleButton, 'click', (e) => {\n                e.stopPropagation();\n                this.#setCaptionOpen(true);\n            });\n        }\n\n        // Apply initial state (caption open by default)\n        this.#applyCaptionState();\n    }\n\n    #setCaptionOpen(isOpen) {\n        this.#state.isCaptionOpen = isOpen;\n        this.#applyCaptionState();\n\n        if (!isOpen) {\n            // Caption closed - show the info toggle button with auto-hide timer\n            this.#showCaptionToggle();\n        } else {\n            // Caption open - hide info toggle button immediately\n            this.#hideCaptionToggle();\n        }\n    }\n\n    #applyCaptionState() {\n        const isOpen = this.#state.isCaptionOpen;\n        this.setAttribute('data-caption-open', isOpen ? 'true' : 'false');\n    }\n\n    #showCaptionToggle() {\n        const { captionToggleButton } = this.#refs;\n        if (!captionToggleButton) return;\n\n        captionToggleButton.classList.add('visible');\n\n        // Clear existing timer\n        if (this.#state.captionToggleTimer) {\n            this.clearManagedTimeout(this.#state.captionToggleTimer);\n        }\n\n        // Set timer to auto-hide info button after 5s\n        this.#state.captionToggleTimer = this.setManagedTimeout(() => {\n            captionToggleButton.classList.remove('visible');\n        }, CAPTION_AUTO_HIDE_DELAY_MS);\n    }\n\n    #hideCaptionToggle() {\n        const { captionToggleButton } = this.#refs;\n        if (!captionToggleButton) return;\n\n        captionToggleButton.classList.remove('visible');\n\n        // Clear auto-hide timer\n        if (this.#state.captionToggleTimer) {\n            this.clearManagedTimeout(this.#state.captionToggleTimer);\n            this.#state.captionToggleTimer = null;\n        }\n    }\n\n    #refreshSlides() {\n        const listEl = this.querySelector(':scope > ul, :scope > ol');\n        if (!listEl) return;\n\n        listEl.classList.add('dax-slides');\n\n        const slides = Array.from(listEl.children)\n            .filter((el) => el.nodeType === Node.ELEMENT_NODE);\n\n        slides.forEach((slideEl, idx) => {\n            slideEl.classList.add('dax-slide');\n            slideEl.dataset.daxIndex = String(idx);\n        });\n\n        this.#state.slides = slides;\n\n        // Check URL for initial slide\n        const initialIndex = this.#checkUrl();\n        if (initialIndex !== -1) {\n            this.#state.currentIndex = initialIndex;\n        }\n\n        this.#setActive(this.#state.currentIndex);\n    }\n\n    #checkUrl() {\n        const { hash } = window.location;\n        if (!hash) return -1;\n\n        // Expectations: #images/filename (no extension)\n        const query = hash.replace(/^#/, '');\n        if (!query) return -1;\n\n        const index = this.#state.slides.findIndex((slide) => {\n            const img = slide.querySelector('img');\n            if (!img) return false;\n\n            const src = img.getAttribute('src');\n            if (!src) return false;\n\n            // Remove extension and leading ./ from src for comparison\n            // e.g. \"./images/pic.jpg\" -> \"images/pic\"\n            const srcNoExt = src\n                .replace(/^\\.\\//, '') // Strip leading ./\n                .replace(/\\.[^/.]+$/, ''); // Strip extension\n\n            return srcNoExt.endsWith(query);\n        });\n\n        return index;\n    }\n\n    #updateUrl(index) {\n        const slide = this.#state.slides[index];\n        if (!slide) return;\n        const img = slide.querySelector('img');\n        if (!img) return;\n\n        const src = img.getAttribute('src');\n        if (src) {\n            // Remove extension and leading ./ for the hash\n            const srcNoExt = src\n                .replace(/^\\.\\//, '') // Strip leading ./\n                .replace(/\\.[^/.]+$/, ''); // Strip extension\n\n            // Update hash without scrolling\n            const hash = `#${srcNoExt}`;\n            if (window.location.hash !== hash) {\n                // usage of replaceState prevents cluttering history if we are just browsing\n                window.history.replaceState(null, '', hash);\n            }\n        }\n    }\n\n    #setActive(index) {\n        const { slides, currentIndex } = this.#state;\n        if (!slides.length) return;\n\n        const currentSlide = slides[currentIndex];\n        const nextIndex = (index + slides.length) % slides.length;\n        const nextSlide = slides[nextIndex];\n\n        if (currentSlide) {\n            currentSlide.classList.remove('dax-active');\n            currentSlide.setAttribute('aria-hidden', 'true');\n        }\n\n        if (nextSlide) {\n            nextSlide.classList.add('dax-active');\n            nextSlide.setAttribute('aria-hidden', 'false');\n            this.#updateImageCounter(nextIndex);\n        }\n\n        this.#state.currentIndex = nextIndex;\n    }\n\n    #attachEventListeners() {\n        const { prevButton, nextButton, playPauseButton } = this.#refs;\n\n        this.addManagedListener(prevButton, 'click', () => {\n            this.#prev();\n            this.#updateUrl(this.#state.currentIndex);\n            this.#maintainAutoplayAfterManualNavigation();\n        });\n\n        this.addManagedListener(nextButton, 'click', () => {\n            this.#next();\n            this.#updateUrl(this.#state.currentIndex);\n            this.#maintainAutoplayAfterManualNavigation();\n        });\n\n        this.addManagedListener(playPauseButton, 'click', () => {\n            if (this.#state.timer) {\n                this.#state.autoplay = false;\n                this.#stop();\n            } else {\n                // Advance to next slide then start autoplay\n                this.#next();\n                this.#start();\n            }\n        });\n\n        // Show controls on mouse move, fade out after timeout\n        // mousemove fires at ~60fps; use a dirty flag so we only schedule\n        // the fade-out timeout once per visibility cycle.\n        this.addManagedListener(this, 'mousemove', () => {\n            if (!this.#state.controlsVisible) this.#showControls();\n        });\n        this.addManagedListener(this, 'mouseenter', () => this.#showControls());\n\n        // Keyboard shortcuts\n        this.addManagedListener(document, 'keydown', (event) => {\n            if (event.key === 'ArrowLeft') {\n                this.#prev();\n                this.#updateUrl(this.#state.currentIndex);\n                this.#maintainAutoplayAfterManualNavigation();\n                this.#showControls();\n            }\n            if (event.key === 'ArrowRight') {\n                this.#next();\n                this.#updateUrl(this.#state.currentIndex);\n                this.#maintainAutoplayAfterManualNavigation();\n                this.#showControls();\n            }\n            if (event.key === ' ') {\n                event.preventDefault();\n                if (this.#state.timer) {\n                    this.#state.autoplay = false;\n                    this.#stop();\n                } else {\n                    this.#next();\n                    this.#start();\n                }\n                this.#showControls();\n            }\n        });\n\n        // Scroll/wheel to advance slides\n        this.addManagedListener(this, 'wheel', (event) => {\n            this.#handleWheel(event);\n        }, { passive: false });\n\n        // Touch swipe to navigate (mobile only)\n        this.addManagedListener(this, 'touchstart', (event) => {\n            this.#handleTouchStart(event);\n        }, { passive: true });\n\n        this.addManagedListener(this, 'touchend', (event) => {\n            this.#handleTouchEnd(event);\n        }, { passive: true });\n\n        // Click on slide to advance based on click zone\n        this.addManagedListener(this, 'click', (event) => {\n            // Only handle clicks on slides/images, not controls or caption close button\n            const slide = event.target.closest('.dax-slide');\n            if (!slide || event.target.closest('.dax-carousel-controls') || event.target.closest('.dax-caption-close')) {\n                return;\n            }\n\n            const image = slide.querySelector('img');\n            const imageRect = image?.getBoundingClientRect();\n            const viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            const clickX = event.clientX;\n            const clickY = event.clientY;\n            let didNavigate = false;\n\n            if (imageRect) {\n                const isInsideImage = clickX >= imageRect.left\n                    && clickX <= imageRect.right\n                    && clickY >= imageRect.top\n                    && clickY <= imageRect.bottom;\n                const leftEdge = imageRect.left + imageRect.width * 0.4;\n\n                if (isInsideImage && clickX <= leftEdge) {\n                    this.#prev();\n                    didNavigate = true;\n                }\n            }\n\n            if (!didNavigate && viewportWidth > 0 && clickX >= viewportWidth * 0.6) {\n                this.#next();\n                didNavigate = true;\n            }\n\n            this.#showControls();\n\n            // Update URL and restart autoplay on manual navigation\n            if (didNavigate) {\n                this.#updateUrl(this.#state.currentIndex);\n                this.#maintainAutoplayAfterManualNavigation();\n            }\n        });\n\n        // Show controls initially\n        this.#showControls();\n    }\n\n    #showControls() {\n        this.classList.add('show-controls');\n        this.#state.controlsVisible = true;\n\n        // If caption is closed, show the info toggle button\n        if (!this.#state.isCaptionOpen) {\n            this.#showCaptionToggle();\n        }\n\n        // Clear existing timer\n        if (this.#state.controlsTimer) {\n            this.clearManagedTimeout(this.#state.controlsTimer);\n        }\n\n        // Set new timer to hide controls\n        this.#state.controlsTimer = this.setManagedTimeout(() => {\n            this.classList.remove('show-controls');\n            this.#state.controlsVisible = false;\n        }, CONTROLS_FADE_INTERVAL);\n    }\n\n    #handleWheel(event) {\n        // Prevent page scroll\n        event.preventDefault();\n\n        // Debounce to avoid rapid-fire advances\n        if (this.#state.wheelLock) return;\n\n        const delta = event.deltaY;\n        const threshold = 30; // Minimum scroll delta to trigger\n\n        if (Math.abs(delta) < threshold) return;\n\n        this.#state.wheelLock = true;\n\n        if (delta > 0) {\n            // Scroll down = next\n            this.#next();\n        } else {\n            // Scroll up = previous\n            this.#prev();\n        }\n\n        this.#showControls();\n        this.#updateUrl(this.#state.currentIndex);\n\n        // Restart autoplay on manual scroll if active\n        this.#maintainAutoplayAfterManualNavigation();\n\n        // Release lock after delay\n        this.setManagedTimeout(() => {\n            this.#state.wheelLock = false;\n        }, 300);\n    }\n\n    #handleTouchStart(event) {\n        // Only handle swipe on mobile breakpoint\n        if (window.innerWidth > MOBILE_BREAKPOINT_PX) return;\n\n        const touch = event.touches[0];\n        if (!touch) return;\n\n        this.#state.touchStartX = touch.clientX;\n        this.#state.touchStartY = touch.clientY;\n        this.#state.touchStartTime = Date.now();\n    }\n\n    #handleTouchEnd(event) {\n        // Only handle swipe on mobile breakpoint\n        if (window.innerWidth > MOBILE_BREAKPOINT_PX) return;\n\n        const touch = event.changedTouches[0];\n        if (!touch) return;\n\n        const deltaX = touch.clientX - this.#state.touchStartX;\n        const deltaY = touch.clientY - this.#state.touchStartY;\n        const deltaTime = Date.now() - this.#state.touchStartTime;\n\n        // Check if this qualifies as a horizontal swipe:\n        // 1. Horizontal distance exceeds threshold\n        // 2. Horizontal movement is greater than vertical (not a scroll)\n        // 3. Gesture completed within time limit\n        const isHorizontalSwipe = Math.abs(deltaX) > SWIPE_THRESHOLD_PX\n            && Math.abs(deltaX) > Math.abs(deltaY)\n            && deltaTime < SWIPE_MAX_TIME_MS;\n\n        if (!isHorizontalSwipe) return;\n\n        if (deltaX < 0) {\n            // Swipe left = next slide\n            this.#next();\n        } else {\n            // Swipe right = previous slide\n            this.#prev();\n        }\n\n        this.#updateUrl(this.#state.currentIndex);\n\n        // Restart autoplay on manual swipe if active\n        this.#maintainAutoplayAfterManualNavigation();\n    }\n\n    #next() {\n        this.#setActive(this.#state.currentIndex + 1);\n    }\n\n    #prev() {\n        this.#setActive(this.#state.currentIndex - 1);\n    }\n\n    #advance() {\n        this.#next();\n        this.dispatchEvent(new CustomEvent('dax-carousel-advance', {\n            bubbles: true,\n            composed: true,\n        }));\n    }\n\n    #start(isInitial = false) {\n        if (this.#state.timer) return;\n        this.#state.timer = this.setManagedInterval(\n            () => this.#advance(),\n            this.#state.intervalMs,\n        );\n        this.#state.autoplay = true;\n        this.#updatePlayPauseLabel();\n        // Only dispatch autoplay-start event for user-initiated starts (not initial page load)\n        if (!isInitial) {\n            this.dispatchEvent(new CustomEvent('dax-carousel-autoplay-start', {\n                bubbles: true,\n                composed: true,\n            }));\n        }\n    }\n\n    #stop() {\n        if (!this.#state.timer) return;\n        this.clearManagedInterval(this.#state.timer);\n        this.#state.timer = null;\n        this.#updatePlayPauseLabel();\n    }\n\n    #maintainAutoplayAfterManualNavigation() {\n        if (!this.#state.autoplay) return;\n\n        // Unconditionally clear any existing timer and start fresh.\n        // Avoids guard-clause gaps where the interval could expire\n        // between the autoplay check and the restart attempt.\n        if (this.#state.timer) {\n            this.clearManagedInterval(this.#state.timer);\n            this.#state.timer = null;\n        }\n\n        this.#state.timer = this.setManagedInterval(\n            () => this.#advance(),\n            this.#state.intervalMs,\n        );\n        this.#updatePlayPauseLabel();\n    }\n\n    #updatePlayPauseLabel() {\n        const { playPauseButton } = this.#refs;\n        if (!playPauseButton) return;\n\n        const isPlaying = Boolean(this.#state.timer);\n        const icon = playPauseButton.querySelector('.material-symbols-sharp');\n        if (icon) {\n            icon.textContent = isPlaying ? 'stop' : 'play_arrow';\n        }\n        playPauseButton.setAttribute(\n            'aria-label',\n            isPlaying ? 'Stop slideshow' : 'Start slideshow',\n        );\n    }\n\n    #updateImageCounter(index) {\n        const { imageCounter } = this.#refs;\n        if (!imageCounter) return;\n        const total = this.#state.slides.length;\n        imageCounter.textContent = `${index + 1}/${total}`;\n    }\n\n    #handleAttributeChange(name, newValue) {\n        if (name === 'interval') {\n            const parsedInterval = Number(newValue);\n            const newInterval = Number.isFinite(parsedInterval) && parsedInterval > 0\n                ? parsedInterval\n                : DEFAULT_INTERVAL;\n            this.#state.intervalMs = newInterval;\n            if (this.#state.timer) {\n                this.#maintainAutoplayAfterManualNavigation();\n            }\n        }\n    }\n}\n\ncustomElements.define('dax-carousel', DaxCarousel);\n\nexport default DaxCarousel;\n"],"names":["BaseComponent","_listeners","_timers","_Class_brand","Base","arguments","length","undefined","HTMLElement","WeakMap","WeakSet","_Base","_class","_this","_classCallCheck","_len","args","Array","_key","_callSuper","concat","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","intervals","timeouts","_inherits","_createClass","key","value","initStyles","_this$constructor","constructor","styles","stylesId","document","getElementById","styleEl","createElement","id","textContent","head","appendChild","initShadow","template","mode","shadow","attachShadow","content","cloneNode","getNumberAttr","name","defaultValue","getAttribute","Number","getBooleanAttr","hasAttribute","addManagedListener","target","event","handler","options","addEventListener","_classPrivateFieldGet","push","setManagedInterval","callback","delay","setInterval","clearManagedInterval","clearInterval","filter","i","setManagedTimeout","setTimeout","clearManagedTimeout","clearTimeout","cleanup","_assertClassBrand","_removeAllListeners","call","_clearAllTimers","forEach","_ref","removeEventListener","_classPrivateFieldSet","DEFAULT_INTERVAL","CONTROLS_FADE_INTERVAL","CAPTION_AUTO_HIDE_DELAY_MS","SWIPE_THRESHOLD_PX","SWIPE_MAX_TIME_MS","MOBILE_BREAKPOINT_PX","CONTROLS_TEMPLATE","CAPTION_CLOSE_TEMPLATE","CAPTION_TOGGLE_TEMPLATE","REF_SELECTORS","prevButton","nextButton","playPauseButton","imageCounter","captionToggleButton","_state","_refs","_DaxCarousel_brand","DaxCarousel","_BaseComponent","intervalMs","autoplay","fullscreen","noControls","currentIndex","timer","controlsTimer","controlsVisible","wheelLock","slides","isCaptionOpen","captionToggleTimer","touchStartX","touchStartY","touchStartTime","connectedCallback","classList","add","_initControls","_initCaptionToggle","_refreshSlides","_attachEventListeners","_start","_updatePlayPauseLabel","disconnectedCallback","attributeChangedCallback","oldValue","newValue","_handleAttributeChange","innerHTML","querySelector","_this2","figcaptions","querySelectorAll","figcaption","closeTemplate","closeBtn","firstElementChild","e","stopPropagation","_setCaptionOpen","insertBefore","firstChild","toggleTemplate","_applyCaptionState","isOpen","_showCaptionToggle","_hideCaptionToggle","setAttribute","_classPrivateFieldGet2","remove","_classPrivateFieldGet3","listEl","from","children","el","nodeType","Node","ELEMENT_NODE","slideEl","idx","dataset","daxIndex","String","initialIndex","_checkUrl","_setActive","hash","window","location","query","replace","index","findIndex","slide","img","src","srcNoExt","endsWith","_updateUrl","history","replaceState","_classPrivateFieldGet4","currentSlide","nextIndex","nextSlide","_updateImageCounter","_this3","_classPrivateFieldGet5","_prev","_maintainAutoplayAfterManualNavigation","_next","_stop","_showControls","preventDefault","_handleWheel","passive","_handleTouchStart","_handleTouchEnd","closest","image","imageRect","getBoundingClientRect","viewportWidth","innerWidth","documentElement","clientWidth","clickX","clientX","clickY","clientY","didNavigate","isInsideImage","left","right","top","bottom","leftEdge","width","_this4","_this5","delta","deltaY","threshold","Math","abs","touch","touches","Date","now","changedTouches","deltaX","deltaTime","isHorizontalSwipe","_advance","dispatchEvent","CustomEvent","bubbles","composed","_this6","isInitial","_this7","_classPrivateFieldGet6","isPlaying","Boolean","icon","_classPrivateFieldGet7","total","parsedInterval","newInterval","isFinite","_defineProperty","customElements","define"],"mappings":"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"}