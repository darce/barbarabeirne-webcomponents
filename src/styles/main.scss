@use './reset';
@use './variables' as *;

@font-face {
  font-family: "Jost";
  src: url("../fonts/jost.woff2") format("woff2");
  font-weight: 300 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Material Symbols Sharp";
  src: url("../fonts/material-symbols-sharp.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: block;
}

body {
  // line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  font-family: $font-family-sans;
  background-color: $color-offwhite;
}

.material-symbols-sharp {
  font-family: $font-family-icons;
  font-weight: 400;
  font-style: normal;
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 48;
  display: inline-block;
  // line-height: 1;
}

.main-container {
  margin-left: $dax-sidebar-width;
  padding-inline: $spacer-medium;
  background-color: $color-offwhite;
  min-height: 100vh;
}

.main-container> :where(img, picture, figure),
.main-container>article> :where(img, picture, figure) {
  display: block;
  width: calc(100% + (#{$spacer-medium} * 2));
  margin-inline: calc(#{$spacer-medium} * -1);
}

.main-container> :where(img),
.main-container>article> :where(img) {
  max-width: none;
}

.main-container figure figcaption {
  padding-inline: $spacer-medium;
}

// Full-bleed gallery-header on desktop to align with sidebar
.main-container .gallery-header {
  margin-left: calc((#{$spacer-medium} + 6px) * -1); // Extra 6px to account for sidebar-header margin-right
  margin-right: calc(#{$spacer-medium} * -1);
  padding-inline: $spacer-medium;
  padding-left: calc(#{$spacer-medium} + 6px); // Match the extra left margin
}

// Back to index button (matches gallery-intro-toggle style)
.button-back {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: $spacing-xs $spacing-md;
  background: $color-white;
  color: $color-black;
  border: 1px solid $color-black;
  box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.2);
  border-radius: 0;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  // line-height: 1;
  text-decoration: none;
  cursor: pointer;
  user-select: none;
  transition: background $duration-fast $ease-out,
    border-color $duration-fast $ease-out,
    color $duration-fast $ease-out;

  &:hover {
    background: $color-black;
    border-color: $color-black;
    color: $color-white;
  }

  &:focus-visible {
    outline: $focus-ring-width solid $color-black;
    outline-offset: $focus-ring-offset;
  }
}

// Standard spacing below gallery-header for static content pages
// Excludes bio-container where image should be flush against header
.main-container:not(.bio-container) .gallery-header + * {
  margin-top: $spacing-xl;
}

// Press page list styles
.press-article {
  padding-bottom: $spacing-xl;
}

.press-list {
  list-style: none;
  padding: 0;
  padding-bottom: $spacing-xl;
  margin: 0;

  li {
    position: relative;
    padding: $spacer-small 0;
    border-top: 1px solid transparent;
    border-bottom: 1px solid transparent;
    transition: border-color $duration-fast $ease-default;
    cursor: pointer;

    &:hover {
      border-top-color: $color-black;
      border-bottom-color: $color-black;
    }
  }

  .publication-name {
    font-weight: 700;
  }

  // Stretch anchor to cover entire LI for clickability
  .publication-title a {
    &::after {
      content: '';
      position: absolute;
      inset: 0;
    }
  }
}

// Exhibitions page styles
.exhibitions {
  ul {
    list-style: disc;
    margin-left: $spacer-medium;
    padding-bottom: $spacing-xl;
  }

  li {
    padding: $spacing-sm 0;
  }

  h2 {
    padding-top: $spacing-lg;
    padding-bottom: $spacing-md;
  }
}

// Bio/Contact page overlay layout
.bio-container {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;

    .gallery-header {
        grid-column: 1;
        grid-row: 1;
        // Full-bleed: extra 6px to align with sidebar-header margin-right
        margin-left: calc((#{$spacer-medium} + 6px) * -1);
        margin-right: calc(#{$spacer-medium} * -1);
        padding-inline: $spacer-medium;
        padding-left: calc(#{$spacer-medium} + 6px);
        z-index: 1;
    }

    .bio-image,
    .bio-content {
        grid-column: 1;
        grid-row: 1 / -1;
    }

    .bio-image {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        height: 100dvh; // Dynamic viewport height on desktop
        overflow: hidden; // Clip image rather than resize

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: left center; // Pin image to left edge for right-side cropping
        }
    }

    .bio-content {
        position: relative;
        z-index: 1;
        justify-self: end;
        align-self: start;
        width: 80%;
        padding: $spacer-medium;
        margin-top: calc(#{$dax-sidebar-masthead-height} + #{$spacer-medium});
        background-color: rgba(255, 255, 255, 0.75);
        box-sizing: border-box;
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);

        p {
            margin-bottom: $spacing-lg;
            line-height: $line-height-relaxed;
        }
    }
}

// =============================================================================
// MOBILE STYLES
// All mobile overrides consolidated below
// =============================================================================
@media (max-width: $breakpoint-nav) {
  // Main container: reset margin, increase padding for text content
  .main-container {
    margin-left: 0;
    padding-inline: $spacing-xl;
  }

  .main-container> :where(img, picture, figure),
  .main-container>article> :where(img, picture, figure) {
    width: calc(100% + (#{$spacing-xl} * 2));
    margin-inline: calc(#{$spacing-xl} * -1);
  }

  .main-container figure figcaption {
    padding-inline: $spacing-xl;
  }

  // Full-bleed gallery-header on mobile
  .main-container .gallery-header {
    margin-left: calc(#{$spacing-xl} * -1);
    margin-right: calc(#{$spacing-xl} * -1);
    padding-left: $spacing-xl;
    padding-right: $spacing-xl;
  }

  // Bio container: stacked layout (image above text)
  .bio-container {
    display: flex;
    flex-direction: column;
    grid-template-rows: none;

    .gallery-header {
      order: 1;
      // Full-bleed: counter parent's mobile padding
      margin-inline: calc(#{$spacing-xl} * -1);
      padding-inline: $spacing-xl;
    }

    .bio-image {
        position: relative;
        top: auto;
        left: auto;
        order: 2;
        height: auto;
        max-height: none;
        margin-inline: calc(#{$spacing-xl} * -1);
        width: calc(100% + (#{$spacing-xl} * 2));

        img {
            width: 100%;
            height: auto;
            object-fit: contain;
        }
    }

    .bio-content {
      order: 3;
      width: 100%;
      margin-top: $spacing-xl; // Reset desktop margin, standard spacing below image
      padding: 0; // Reset desktop padding
      background-color: transparent;
      box-shadow: none; // Reset desktop box-shadow
    }
  }
}
