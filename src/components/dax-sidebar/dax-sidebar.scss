@use '../../styles/shared' as *;

// ============================================================================
// DAX-SIDEBAR COMPONENT STYLES
// ============================================================================
// Desktop-first approach: Base styles are desktop, mobile overrides at bottom.
// Using consolidated mobile breakpoint: $breakpoint-nav (810px)
// ============================================================================

// Component-specific variables
$sidebar-bg: $color-translucent-white-50;
$sidebar-mobile-width: 80%;
$sidebar-z-index: $z-index-modal;
$sidebar-z-index-desktop: 9999;
$sidebar-masthead-font-size: $font-size-subheader;
$sidebar-masthead-font-weight: $font-weight-bold;
$sidebar-masthead-link-padding-vertical: 20px;
$sidebar-masthead-link-padding-horizontal: 20px;
$sidebar-toggle-padding: $spacing-sm;
$sidebar-toggle-icon-size: $font-size-xl;
$sidebar-toggle-icon-weight: 400;

// ─────────────────────────────────────────────────────────────────────────────
// HOST
// ─────────────────────────────────────────────────────────────────────────────

:host {
  display: block;
  --dax-sidebar-breakpoint-nav: #{$breakpoint-nav};
}

// ─────────────────────────────────────────────────────────────────────────────
// SIDEBAR CONTAINER (DESKTOP)
// ─────────────────────────────────────────────────────────────────────────────

.dax-sidebar {
  position: fixed;
  top: 0;
  left: 0;
  z-index: $sidebar-z-index-desktop;
  width: $dax-sidebar-width;
}

:host([data-nav-open="false"]) .dax-sidebar {
  pointer-events: none;
}

:host([data-nav-open="false"]) .dax-sidebar-header {
  pointer-events: auto;
}

// ─────────────────────────────────────────────────────────────────────────────
// BACKDROP (hidden on desktop, visible on mobile when open)
// ─────────────────────────────────────────────────────────────────────────────

.dax-sidebar-backdrop {
  display: none;
  position: fixed;
  inset: 0;
  background: $color-translucent-black;
  z-index: $sidebar-z-index - 1;
  opacity: 0;
  transition: opacity $duration-normal $ease-out;
}

// ─────────────────────────────────────────────────────────────────────────────
// HEADER & MASTHEAD
// ─────────────────────────────────────────────────────────────────────────────

.dax-sidebar-header {
  background: $color-white;
  display: flex;
  align-items: center;
  position: relative;
  z-index: 10;
  min-height: $dax-sidebar-masthead-height;
  padding: 0 $spacing-sm;
  margin-right: 6px;
}

// .dax-sidebar-masthead {
//   display: inline-block;
//   padding-left: $spacing-sm;
//   width: 100%;
//   height: 100%;
// }

.masthead {
  flex: 1;
  text-transform: uppercase;
  text-align: right;
  font-family: inherit;
  font-weight: $sidebar-masthead-font-weight;
  font-size: $sidebar-masthead-font-size;
  padding: $spacing-xs $spacing-xl $spacing-xs $spacing-sm;
  margin: 0;
  margin-right: 6px; // Align with dax-nav, accounting for box-shadow space
  white-space: nowrap;
  // Button reset
  background: transparent;
  border: none;
  cursor: pointer;
  color: $color-black;

  &:hover {
    background: $color-gray;
    color: $color-white;
  }

  &:focus,
  &:focus-visible {
    outline: $focus-ring-width solid $color-black;
    outline-offset: $focus-ring-offset;
  }
}

// ─────────────────────────────────────────────────────────────────────────────
// TOGGLE BUTTON
// ─────────────────────────────────────────────────────────────────────────────

.dax-sidebar-toggle {
  background: white;
  // backdrop-filter: blur(8px);
  // -webkit-backdrop-filter: blur(8px);
  border: none;
  cursor: pointer;
  // padding: $sidebar-toggle-padding;
  color: $color-black;
  // display: flex;
  // align-items: center;
  // justify-content: center;
  // flex-shrink: 0;

  &:hover {
    background: $color-gray;
    color: $color-white;
  }

  &:focus,
  &:focus-visible {
    outline: $focus-ring-width solid $color-black;
    outline-offset: $focus-ring-offset;
  }

  .material-symbols-sharp {
    font-size: $sidebar-toggle-icon-size;
    font-family: $font-family-icons;
    font-weight: $sidebar-toggle-icon-weight;
    font-style: normal;
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 48;
    display: inline-block;
    // line-height: 1;
    transition: transform $duration-fast $ease-out;
  }
}

// Rotate icon when menu is open
:host([data-nav-open="true"]) .dax-sidebar-toggle .material-symbols-sharp {
  transform: rotate(90deg);
}

// =============================================================================
// NOTE: Reduced motion is handled globally via CSS custom properties
// in _variables.scss. No component-specific @media query needed.
// =============================================================================

// =============================================================================
// MOBILE BREAKPOINT (max-width: $breakpoint-nav)
// =============================================================================
// All mobile-specific overrides below this line.
// Mobile breakpoint: 810px (defined as $breakpoint-nav in _variables.scss)
// =============================================================================

@media (max-width: $breakpoint-nav) {

  // Sidebar container: narrower width, offset for fixed header
  .dax-sidebar {
    width: $sidebar-mobile-width;
    // padding-top: $dax-sidebar-masthead-height;
    z-index: $sidebar-z-index;
  }

  // Header: full-width fixed bar at top
  .dax-sidebar-header {
    position: relative;
    top: 0;
    left: 0;
    width: 100vw;
    z-index: $sidebar-z-index;
  }

  // Masthead: spans full width with padding
  // .dax-sidebar-masthead {
  //   width: 100%;
  //   padding-right: $spacing-sm;
  // }

  // Text aligned right on mobile
  .masthead {
    text-align: right;
  }

  // Backdrop visible when nav is open
  :host([data-nav-open="true"]) .dax-sidebar-backdrop {
    display: block;
    opacity: 1;
  }
}