// dax-nav - Light DOM styles
@use '../../styles/shared' as *;

// Component-specific variables
$nav-font-size-menu: $font-size-subheader;
$nav-bg: $color-translucent-white-50;
$nav-fg: $color-black;
$nav-hover-bg: $color-gray;
$nav-hover-fg: $color-white;
$nav-mobile-breakpoint: $breakpoint-nav;
$nav-icon-size: $icon-size-lg;
$nav-line-height: $line-height-nav;
$nav-item-padding-y: $spacer-rhythm;
$nav-hover-offset: $spacing-xs;

// Component container
dax-nav {
  display: block;
  position: relative; // Context for toggles if needed, and for overflow
  overflow: hidden; // Clip the menu as it slides up (-100%)

  // Mobile menu toggle button - hidden by default
  .dax-nav-toggle {
    display: none;
    cursor: pointer;
    position: absolute;
    top: 0;
    left: 0;
    padding: $spacing-lg;
    background: transparent;
    border: 0;
    z-index: $z-index-overlay;

    .material-symbols-sharp {
      font-size: $nav-icon-size;
      color: $nav-fg;
    }

    &:hover,
    &:focus-visible {
      background: $nav-hover-bg;

      .material-symbols-sharp {
        color: $nav-hover-fg;
      }
    }

    &:focus-visible {
      outline: $focus-ring-width solid $nav-fg;
      outline-offset: $focus-ring-offset;
    }
  }

  // Main menu list
  .dax-nav-menu {
    line-height: $nav-line-height;
    font-size: $nav-font-size-menu;
    text-align: right;
    padding-bottom: $spacing-lg;

    // Background moved here for sliding effect
    background: $nav-bg;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);

    // Transition properties
    transition: opacity $duration-normal $ease-out,
      visibility 0s linear $duration-normal,
      transform $duration-normal $ease-out;
    transform-origin: top;

    >li {
      text-transform: uppercase;
      font-weight: $font-weight-medium;
      padding-right: $spacing-xl;
    }
  }

  &[data-open="false"] {
    pointer-events: none;

    .dax-nav-menu {
      opacity: 0;
      visibility: hidden;
      transform: translateY(-100%); // Slide fully out of view (upwards)
      pointer-events: none;
    }
  }

  &[data-open="true"] {
    pointer-events: auto;

    .dax-nav-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
      transition: opacity $duration-normal $ease-out,
        visibility 0s linear 0s,
        transform $duration-normal $ease-out;
    }
  }

  // Project list (nested menu)
  .dax-nav-projects {
    padding-bottom: $spacing-lg;

    >li {
      font-weight: $font-weight-thin;
      text-transform: capitalize;
      padding-right: $spacing-xl;
    }

    // Current page indicator
    .dax-nav-current a {
      background: $nav-fg;
      color: $nav-hover-fg;
      box-shadow: ($spacing-xl * 2) 0 0 0 $nav-fg;
      cursor: default;
    }
  }

  // Current page in main menu (non-project pages like Exhibitions, Press, Bio, Contact)
  .dax-nav-menu>.dax-nav-current>a {
    background: $nav-fg;
    color: $nav-hover-fg;
    box-shadow: $spacing-xl 0 0 0 $nav-fg; // Extend to sidebar edge
    cursor: default;
  }

  .dax-nav-menu>li>a,
  .dax-nav-projects>li a {
    display: block;
    width: 100%;
    // padding: $nav-item-padding-y $spacing-lg;
    color: $nav-fg;
    text-decoration: none;
    cursor: pointer;
    transition: transform $duration-fast $ease-out,
      box-shadow $duration-fast $ease-out;
  }

  .dax-nav-menu>li>a:hover,
  .dax-nav-menu>li>a:focus,
  .dax-nav-menu>li>a:focus-visible {
    background: $nav-fg;
    color: $nav-hover-fg;
    box-shadow: $spacing-xl 0 0 0 $nav-fg;
  }

  .dax-nav-projects>li a:hover,
  .dax-nav-projects>li a:focus,
  .dax-nav-projects>li a:focus-visible {
    background: $nav-fg;
    color: $nav-hover-fg;
    box-shadow: ($spacing-xl * 2) 0 0 0 $nav-fg;
  }

  .dax-nav-menu>li>a:focus,
  .dax-nav-menu>li>a:focus-visible,
  .dax-nav-projects>li a:focus,
  .dax-nav-projects>li a:focus-visible {
    outline: $focus-ring-width solid $nav-fg;
    outline-offset: $focus-ring-offset;
  }
}

// Mobile-specific adjustments
@media (max-width: $nav-mobile-breakpoint) {
  dax-nav {

    // Show toggle button on mobile
    .dax-nav-toggle {
      display: block;
    }

    .dax-nav-menu {
      background: $color-white;
      backdrop-filter: none;
      -webkit-backdrop-filter: none;
    }
  }
}

// Reduced motion
@media (prefers-reduced-motion: reduce) {
  dax-nav {
    .dax-nav-menu {
      transition: none;
    }
  }
}